var LiteGUI={root:null,content:null,panels:{},undo_steps:[],modalbg_div:null,_modules_initialized:!1,mainmenu:null,modules:[],init:function(c){c=c||{};c.width&&c.height&&this.setWindowSize(c.width,c.height);this.container=null;c.container&&(this.container=document.getElementById(c.container));this.container||(this.container=document.body);var a=document.createElement("div");a.className="litegui-wrap fullscreen";a.style.position="relative";a.style.overflow="hidden";this.root=a;this.container.appendChild(a);
a=this.modalbg_div=document.createElement("div");this.modalbg_div.className="litemodalbg";this.root.appendChild(this.modalbg_div);a.style.display="none";a=document.createElement("div");a.className="litegui-maincontent";this.content=a;this.root.appendChild(a);c.menubar&&this.createMenubar();c.gui_callback&&c.gui_callback();!1!=c.initModules&&this.initModules();this.root.classList.contains("fullscreen")&&window.addEventListener("resize",function(b){LiteGUI.maximizeWindow()});document.addEventListener("keydown",
function(b){"input"!=b.target.nodeName.toLowerCase()&&"textarea"!=b.target.nodeName.toLowerCase()&&17!=b.keyCode&&((26==b.keyCode||90==b.keyCode&&(b.ctrlKey||b.metaKey)||122==b.charCode&&b.ctrlKey)&&LiteGUI.doUndo(),27==b.keyCode&&$(LiteGUI).trigger("escape"))});window.onbeforeunload=this.onUnload.bind(this)},initModules:function(){for(var c in this.modules)this.modules[c].preInit&&this.modules[c].preInit();for(c in this.modules)this.modules[c].init&&!this.modules[c]._initialized&&(this.modules[c].init(),
this.modules[c]._initialized=!0);for(c in this.modules)this.modules[c].postInit&&this.modules[c].postInit();this._modules_initialized=!0},registerModule:function(c){this.modules.push(c);this._modules_initialized&&(c.preInit&&c.preInit(),c.init&&c.init(),c.postInit&&c.postInit());$(this).trigger("module_registered",c)},onUnload:function(){for(var c in this.modules)if(this.modules[c].onUnload)this.modules[c].onUnload()},add:function(c){this.content.appendChild(c.root||c)},getById:function(c){return document.getElementById(c)},
createMenubar:function(){this.menubar=new LiteGUI.Menubar("mainmenubar");this.add(this.menubar)},setWindowSize:function(c,a){if(c&&a)$(this.root).css({width:c+"px",height:a+"px","box-shadow":"0 0 4px black"}).removeClass("fullscreen");else{if($(this.root).hasClass("fullscreen"))return;$(this.root).addClass("fullscreen");$(this.root).css({width:"100%",height:"100%","box-shadow":"0 0 0"})}$(LiteGUI).trigger("resized")},maximizeWindow:function(){this.setWindowSize()},max_undo_steps:100,min_time_between_undos:500,
last_undo_time:0,addUndoStep:function(c){var a=(new Date).getTime();a-this.last_undo_time<this.min_time_between_undos||(this.undo_steps.push(c),this.last_undo_time=a,this.undo_steps.length>this.max_undo_steps&&this.undo_steps.shift())},doUndo:function(){if(this.undo_steps.length){var c=this.undo_steps.pop();null!=c.callback&&c.callback(c.data);$(LiteGUI).trigger("undo",c)}},removeUndoSteps:function(){this.undo_steps=[]},toClipboard:function(c){null!=c&&localStorage.setItem("lite_clipboard",JSON.stringify(c))},
getClipboard:function(){var c=localStorage.getItem("lite_clipboard");return c?JSON.parse(c):null},addCSS:function(c){var a=document.createElement("style");a.type="text/css";a.innerHTML=c;document.getElementsByTagName("head")[0].appendChild(a)},requireCSS:function(c,a){for("string"==typeof c&&(c=[c]);c.length;){var b=document.createElement("link");b.rel="stylesheet";b.type="text/css";b.href=c.shift(1);b.media="all";document.getElementsByTagName("head")[0].appendChild(b);0==c.length&&(b.onload=a)}},
request:function(c){var a=c.dataType||"text";"json"==a?a="text":"xml"==a?a="text":"binary"==a&&(a="arraybuffer",c.mimeType="application/octet-stream");var b=new XMLHttpRequest;b.open(c.data?"POST":"GET",c.url,!0);a&&(b.responseType=a);c.mimeType&&b.overrideMimeType(c.mimeType);b.onload=function(a){a=this.response;if(200!=this.status)a="Error "+this.status,c.error&&c.error(a),LEvent.trigger(b,"fail",this.status);else{if("json"==c.dataType)try{a=JSON.parse(a)}catch(e){if(c.error)c.error(e);else throw e;
}else if("xml"==c.dataType)try{a=(new DOMParser).parseFromString(a,"text/xml")}catch(d){if(c.error)c.error(d);else throw d;}c.success&&c.success.call(this,a)}};b.onerror=function(b){c.error&&c.error(b)};b.send(c.data);return b},requireScript:function(c,a,b,f){"string"==typeof c&&(c=[c]);var e=c.length,d;for(d in c){var g=document.createElement("script");g.num=d;g.type="text/javascript";g.src=c[d];g.async=!1;g.onload=function(f){e--;e?b&&b(this.src,this.num):a&&a()};f&&(g.onerror=function(b){f(b,this.src,
this.num)});document.getElementsByTagName("head")[0].appendChild(g)}},requireScriptSerial:function(c,a,b){function f(){var e=document.createElement("script");e.type="text/javascript";e.src=c.shift(1);e.onload=function(e){c.length?(b&&b(c[0],c.length),f()):a&&a()};document.getElementsByTagName("head")[0].appendChild(e)}"string"==typeof c&&(c=[c]);f()},newDiv:function(c,a){var b=document.createElement("div");b.id=c;b.root=b;void 0!==a&&(b.innerHTML=a);b.add=function(b){this.appendChild(b.root||b)};
return b},newWindow:function(c,a,b,f){f=f||{};a=window.open("","","width="+a+", height="+b+", location=no, status=no, menubar=no, titlebar=no, fullscreen=yes");a.document.write("<html><head><title>"+c+"</title>");b=document.querySelectorAll("link[rel='stylesheet'],style");for(c=0;c<b.length;c++)a.document.write(b[c].outerHTML);if(f.scripts)for(b=document.querySelectorAll("script"),c=0;c<b.length;c++)b[c].src&&a.document.write(b[c].outerHTML);a.document.write("</head><body>"+(f.content||"")+"</body></html>");
a.document.close();return a},showModalBackground:function(c){LiteGUI.modalbg_div.style.display=c?"block":"none"},showMessage:function(c,a){a=a||{};a.title=a.title||"Attention";a.content=c;a.close="fade";var b=new LiteGUI.Dialog("info_message",a);a.noclose||b.addButton("Close",{close:!0});b.makeModal("fade");return b},popup:function(c,a){a=a||{};a.min_height=140;"string"==typeof c&&(c="<p>"+c+"</p>");a.content=c;a.close="fade";var b=new LiteGUI.Dialog("info_message",a);a.noclose||b.addButton("Close",
{close:!0});b.show();return b},alert:function(c,a){a=a||{};a.className="alert";a.title="Alert";a.width=280;a.height=140;"string"==typeof c&&(c="<p>"+c+"</p>");$(".litepanel.alert").remove();return this.showMessage(c,a)},confirm:function(c,a,b){b=b||{};b.className="alert";b.title="Confirm";b.width=280;"string"==typeof c&&(c="<p>"+c+"</p>");b.noclose=!0;var f=this.showMessage(c+"<button data-value='yes' style='width:45%; margin-left: 10px'>Yes</button><button data-value='no' style='width:45%'>No</button>",
b);f.content.style.paddingBottom="10px";f.content.querySelector("button").addEventListener("click",function(){var b="yes"==this.dataset.value;a&&a(b);f.close()});return f},prompt:function(c,a,b){b=b||{};b.className="alert";b.title="Prompt";b.width=280;"string"==typeof c&&(c="<p>"+c+"</p>");var f=b.value||"",e="<input type='text' value='"+f+"'/>";b.textarea&&(e="<textarea class='textfield' style='width:95%'>"+f+"</textarea>");b.noclose=!0;var d=this.showMessage(c+("<p>"+e+"</p><button data-value='accept' style='width:45%; margin-left: 10px; margin-bottom: 10px'>Accept</button><button data-value='cancel' style='width:45%'>Cancel</button>"),
b);d.content.querySelector("button").addEventListener("click",function(){var f=$(d.content).find(b.textarea?"textarea":"input").val();"cancel"==this.dataset.value&&(f=null);a&&a(f);d.close()});$(d.content).find("input,textarea").focus();return d},getUrlVars:function(){for(var c=[],a,b=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),f=0;f<b.length;f++)a=b[f].split("="),c.push(a[0]),c[a[0]]=a[1];return c},getUrlVar:function(c){return LiteGUI.getUrlVars()[c]},trigger:function(c,
a,b){var f=document.createEvent("CustomEvent");f.initCustomEvent(a,!0,!0,b);if(c.dispatchEvent)c.dispatchEvent(f);else throw"trigger can only be called in DOMElements";},draggable:function(c,a){function b(a){if("mousedown"==a.type)return d||(g=(d=c.getClientRects()[0])?d.left:0,h=d?d.top:0),f=a.clientX,e=a.clientY,document.addEventListener("mousemove",b),document.addEventListener("mouseup",b),a.stopPropagation(),a.preventDefault(),!1;if("mouseup"==a.type)document.removeEventListener("mousemove",b),
document.removeEventListener("mouseup",b);else if("mousemove"==a.type){var m=a.clientX-f,p=a.clientY-e;f=a.clientX;e=a.clientY;g+=m;h+=p;c.style.left=g+"px";c.style.top=h+"px"}}a=a||c;a.addEventListener("mousedown",b);a.style.cursor="move";var f=0,e=0,d=c.getClientRects()[0],g=d?d.left:0,h=d?d.top:0;c.style.position="absolute";c.style.left=g+"px";c.style.top=h+"px"},cloneObject:function(c,a){var b=a||{},f;for(f in c)if("_"!=f[0]&&"jQuery"!=f.substr(0,6)){var e=c[f];if(null==e)b[f]=null;else if(!isFunction(e))if("number"==
typeof e||"string"==typeof e)b[f]=e;else if(e.constructor==Float32Array)b[f]=Array.apply([],e);else if(isArray(e))b[f]&&b[f].constructor==Float32Array?b[f].set(e):b[f]=JSON.parse(JSON.stringify(e));else try{b[f]=JSON.parse(JSON.stringify(e))}catch(d){console.error(d)}}return b}};function purgeElement(c,a){var b=c.attributes,f,e;if(b)for(f=b.length-1;0<=f;f-=1)e=b[f].name,"function"===typeof c[e]&&(c[e]=null);if(b=c.childNodes)for(b=b.length,f=0;f<b;f+=1)purgeElement(c.childNodes[f])}
"undefined"==typeof escapeHtmlEntities&&(escapeHtmlEntities=function(c){return c.replace(/[\u00A0-\u2666<>\&]/g,function(a){return"&"+(escapeHtmlEntities.entityTable[a.charCodeAt(0)]||"#"+a.charCodeAt(0))+";"})},escapeHtmlEntities.entityTable={34:"quot",38:"amp",39:"apos",60:"lt",62:"gt",160:"nbsp",161:"iexcl",162:"cent",163:"pound",164:"curren",165:"yen",166:"brvbar",167:"sect",168:"uml",169:"copy",170:"ordf",171:"laquo",172:"not",173:"shy",174:"reg",175:"macr",176:"deg",177:"plusmn",178:"sup2",
179:"sup3",180:"acute",181:"micro",182:"para",183:"middot",184:"cedil",185:"sup1",186:"ordm",187:"raquo",188:"frac14",189:"frac12",190:"frac34",191:"iquest",192:"Agrave",193:"Aacute",194:"Acirc",195:"Atilde",196:"Auml",197:"Aring",198:"AElig",199:"Ccedil",200:"Egrave",201:"Eacute",202:"Ecirc",203:"Euml",204:"Igrave",205:"Iacute",206:"Icirc",207:"Iuml",208:"ETH",209:"Ntilde",210:"Ograve",211:"Oacute",212:"Ocirc",213:"Otilde",214:"Ouml",215:"times",216:"Oslash",217:"Ugrave",218:"Uacute",219:"Ucirc",
220:"Uuml",221:"Yacute",222:"THORN",223:"szlig",224:"agrave",225:"aacute",226:"acirc",227:"atilde",228:"auml",229:"aring",230:"aelig",231:"ccedil",232:"egrave",233:"eacute",234:"ecirc",235:"euml",236:"igrave",237:"iacute",238:"icirc",239:"iuml",240:"eth",241:"ntilde",242:"ograve",243:"oacute",244:"ocirc",245:"otilde",246:"ouml",247:"divide",248:"oslash",249:"ugrave",250:"uacute",251:"ucirc",252:"uuml",253:"yacute",254:"thorn",255:"yuml",402:"fnof",913:"Alpha",914:"Beta",915:"Gamma",916:"Delta",917:"Epsilon",
918:"Zeta",919:"Eta",920:"Theta",921:"Iota",922:"Kappa",923:"Lambda",924:"Mu",925:"Nu",926:"Xi",927:"Omicron",928:"Pi",929:"Rho",931:"Sigma",932:"Tau",933:"Upsilon",934:"Phi",935:"Chi",936:"Psi",937:"Omega",945:"alpha",946:"beta",947:"gamma",948:"delta",949:"epsilon",950:"zeta",951:"eta",952:"theta",953:"iota",954:"kappa",955:"lambda",956:"mu",957:"nu",958:"xi",959:"omicron",960:"pi",961:"rho",962:"sigmaf",963:"sigma",964:"tau",965:"upsilon",966:"phi",967:"chi",968:"psi",969:"omega",977:"thetasym",
978:"upsih",982:"piv",8226:"bull",8230:"hellip",8242:"prime",8243:"Prime",8254:"oline",8260:"frasl",8472:"weierp",8465:"image",8476:"real",8482:"trade",8501:"alefsym",8592:"larr",8593:"uarr",8594:"rarr",8595:"darr",8596:"harr",8629:"crarr",8656:"lArr",8657:"uArr",8658:"rArr",8659:"dArr",8660:"hArr",8704:"forall",8706:"part",8707:"exist",8709:"empty",8711:"nabla",8712:"isin",8713:"notin",8715:"ni",8719:"prod",8721:"sum",8722:"minus",8727:"lowast",8730:"radic",8733:"prop",8734:"infin",8736:"ang",8743:"and",
8744:"or",8745:"cap",8746:"cup",8747:"int",8756:"there4",8764:"sim",8773:"cong",8776:"asymp",8800:"ne",8801:"equiv",8804:"le",8805:"ge",8834:"sub",8835:"sup",8836:"nsub",8838:"sube",8839:"supe",8853:"oplus",8855:"otimes",8869:"perp",8901:"sdot",8968:"lceil",8969:"rceil",8970:"lfloor",8971:"rfloor",9001:"lang",9002:"rang",9674:"loz",9824:"spades",9827:"clubs",9829:"hearts",9830:"diams",338:"OElig",339:"oelig",352:"Scaron",353:"scaron",376:"Yuml",710:"circ",732:"tilde",8194:"ensp",8195:"emsp",8201:"thinsp",
8204:"zwnj",8205:"zwj",8206:"lrm",8207:"rlm",8211:"ndash",8212:"mdash",8216:"lsquo",8217:"rsquo",8218:"sbquo",8220:"ldquo",8221:"rdquo",8222:"bdquo",8224:"dagger",8225:"Dagger",8240:"permil",8249:"lsaquo",8250:"rsaquo",8364:"euro"});
function beautifyCode(c,a){a=a||"abstract else instanceof super boolean enum int switch break export interface synchronized byte extends let this case false long throw catch final native throws char finally new transient class float null true const for package try continue function private typeof debugger goto protected var default if public void delete implements return volatile do import short while double in static with".split(" ");c=c.replace(/(\w+)/g,function(b){return-1!=a.indexOf(b)?"<span class='rsv'>"+
b+"</span>":b});c=c.replace(/([0-9]+)/g,function(b){return"<span class='num'>"+b+"</span>"});c=c.replace(/(\w+\.\w+)/g,function(b){b=b.split(".");return"<span class='obj'>"+b[0]+"</span>.<span class='prop'>"+b[1]+"</span>"});c=c.replace(/(\w+)\(/g,function(b){return"<span class='prop'>"+b.substr(0,b.length-1)+"</span>("});c=c.replace(/(\"(\\.|[^\"])*\")/g,function(b){return"<span class='str'>"+b+"</span>"});return c=c.replace(/(\/\/[a-zA-Z0-9\?\!\(\)_ ]*)/g,function(b){return"<span class='cmnt'>"+
b+"</span>"})}
(function(){function c(b,a){a=a||{};var c=document.createElement("div");c.className="litegui searchbox";c.innerHTML="<input value='"+b+"' placeholder='"+(null!=a.placeholder?a.placeholder:"Search")+"'/>";this.input=c.querySelector("input");this.root=c;var d=this;$(this.input).change(function(b){b=b.target.value;a.callback&&a.callback.call(d,b)})}function a(b,a){a=a||{};var c=document.createElement("div");c.className="litearea";b&&(c.id=b);this.root=c;this.root.litearea=this;var d=a.width||"100%",
g=a.height||"100%";0>d&&(d="calc( 100% - "+Math.abs(d)+"px)");0>g&&(g="calc( 100% - "+Math.abs(g)+"px)");c.style.width=d;c.style.height=g;this.options=a;var h=this;window.addEventListener("resize",function(b){h.resize(b)});this._computed_size=[$(this.root).width(),$(this.root).height()];c=document.createElement("div");a.content_id&&(c.id=a.content_id);c.className="liteareacontent";c.style.width="100%";c.style.height="100%";this.root.appendChild(c);this.content=c;this.split_direction="none";this.sections=
[];a.autoresize&&$(LiteGUI).bind("resized",function(){h.resize()})}LiteGUI.Button=function(b,a){a=a||{};"function"===typeof a&&(a={callback:a});var c=this,d=document.createElement("div");d.className="litegui button";this.root=d;var g=document.createElement("button");this.content=g;d.appendChild(g);g.innerHTML=b;g.addEventListener("click",function(b){c.click()});this.click=function(){a.callback&&a.callback.call(c)}};c.prototype.setValue=function(b){$(this.input).val(b).change()};c.prototype.getValue=
function(){return $(this.input).val()};LiteGUI.SearchBox=c;a.prototype.getSection=function(b){b=b||0;return this.sections.length>b?this.sections[b]:null};a.prototype.resize=function(b){var a=[$(this.root).width(),$(this.root).height()];b&&this._computed_size&&a[0]==this._computed_size[0]&&a[1]==this._computed_size[1]||this.sendResizeEvent(b)};a.prototype.adjustHeight=function(){if(this.root.parentNode){var b=this.root.getClientRects()[0].top;this.root.style.height="calc( 100% - "+b+"px )"}else console.error("Cannot adjust height of LiteGUI.Area without parent")};
a.prototype.sendResizeEvent=function(b){if(this.sections.length)for(var a in this.sections)this.sections[a].resize(b);else for(b=0;b<this.root.childNodes.length;b++)a=this.root.childNodes[b],a.litearea?a.litearea.resize():$(a).trigger("resize");if(this.onresize)this.onresize()};a.prototype.split=function(b,a,c){function d(b){var a=q.root.ownerDocument;a.addEventListener("mousemove",g);a.addEventListener("mouseup",h);t[0]=b.pageX;t[1]=b.pageY;b.stopPropagation();b.preventDefault()}function g(a){"horizontal"==
b?t[0]!=a.pageX&&q.moveSplit(t[0]-a.pageX):"vertical"==b&&t[1]!=a.pageY&&q.moveSplit(a.pageY-t[1]);t[0]=a.pageX;t[1]=a.pageY;a.stopPropagation();a.preventDefault();q.options.inmediateResize&&q.resize()}function h(b){b=q.root.ownerDocument;b.removeEventListener("mousemove",g);b.removeEventListener("mouseup",h);q.resize()}b=b||"vertical";if(this.sections.length)throw"cannot split twice";var k=new LiteGUI.Area(null,{content_id:this.content.id});k.root.style.display="inline-block";var m=new LiteGUI.Area;
m.root.style.display="inline-block";var p="",l=null,n=null;c&&(p=" - 5px",l=document.createElement("div"),l.className="litesplitbar "+b,this.splitbar=l,l.addEventListener("mousedown",d));a=a||["50%",null];"vertical"==b?(k.root.style.width="100%",m.root.style.width="100%",null==a[0]?(n=a[1],"number"==typeof n&&(n=a[1]+"px"),k.root.style.height="-moz-calc( 100% - "+n+p+" )",k.root.style.height="-webkit-calc( 100% - "+n+p+" )",k.root.style.height="calc( 100% - "+n+p+" )",m.root.style.height=n,m.size=
n,n=k):null==a[1]?(n=a[0],"number"==typeof n&&(n=a[0]+"px"),k.root.style.height=n,k.size=n,m.root.style.height="-moz-calc( 100% - "+n+p+" )",m.root.style.height="-webkit-calc( 100% - "+n+p+" )",m.root.style.height="calc( 100% - "+n+p+" )",n=m):(p=a[0],"number"==typeof p&&(p=a[0]+"px"),c=a[1],"number"==typeof c&&(c=a[1]+"px"),k.root.style.height=p,k.size=p,m.root.style.height=c,m.size=c)):(k.root.style.height="100%",m.root.style.height="100%",null==a[0]?(n=a[1],"number"==typeof n&&(n=a[1]+"px"),k.root.style.width=
"-moz-calc( 100% - "+n+p+" )",k.root.style.width="-webkit-calc( 100% - "+n+p+" )",k.root.style.width="calc( 100% - "+n+p+" )",m.root.style.width=n,m.size=a[1],n=k):null==a[1]?(n=a[0],"number"==typeof n&&(n=a[0]+"px"),k.root.style.width=n,k.size=n,m.root.style.width="-moz-calc( 100% - "+n+p+" )",m.root.style.width="-webkit-calc( 100% - "+n+p+" )",m.root.style.width="calc( 100% - "+n+p+" )",n=m):(p=a[0],"number"==typeof p&&(p=a[0]+"px"),c=a[1],"number"==typeof c&&(c=a[1]+"px"),k.root.style.width=p,
k.size=p,m.root.style.width=c,m.size=c));k.root.removeChild(k.content);k.root.appendChild(this.content);k.content=this.content;this.root.appendChild(k.root);l&&this.root.appendChild(l);this.root.appendChild(m.root);this.sections=[k,m];this.dynamic_section=n;this.direction=b;var q=this,t=[0,0]};a.prototype.hide=function(){this.root.style.display="none"};a.prototype.show=function(){this.root.style.display="block"};a.prototype.showSection=function(b){var a=this.sections[b],c=0,c="horizontal"==this.direction?
a.root.style.width:a.root.style.height;-1!=c.indexOf("calc")&&(c="50%");for(var d in this.sections)a=this.sections[d],d==b?a.root.style.display="inline-block":"horizontal"==this.direction?a.root.style.width="calc( 100% - "+c+" - 5px)":a.root.style.height="calc( 100% - "+c+" - 5px)";this.splitbar&&(this.splitbar.style.display="inline-block");this.sendResizeEvent()};a.prototype.hideSection=function(b){for(var a in this.sections){var c=this.sections[a];a==b?c.root.style.display="none":"horizontal"==
this.direction?c.root.style.width="100%":c.root.style.height="100%"}this.splitbar&&(this.splitbar.style.display="none");this.sendResizeEvent()};a.prototype.moveSplit=function(b){if(this.sections){var a=this.sections[0],c=this.sections[1];"horizontal"==this.direction?this.dynamic_section==a?(b=$(c.root).width()+b+"px",a.root.style.width="-moz-calc( 100% - "+b+" - 2px )",a.root.style.width="-webkit-calc( 100% - "+b+" - 2px )",a.root.style.width="calc( 100% - "+b+" - 2px )",c.root.style.width=b):(b=
$(a.root).width()-b+"px",a.root.style.width=b,c.root.style.width="-moz-calc( 100% - "+b+" - 2px )",c.root.style.width="-webkit-calc( 100% - "+b+" - 2px )",c.root.style.width="calc( 100% - "+b+" - 2px )"):"vertical"==this.direction&&(this.dynamic_section==a?(b=$(c.root).height()-b+"px",a.root.style.height="-moz-calc( 100% - "+b+" - 2px )",a.root.style.height="-webkit-calc( 100% - "+b+" - 2px )",a.root.style.height="calc( 100% - "+b+" - 2px )",c.root.style.height=b):(b=$(a.root).height()+b+"px",a.root.style.height=
b,c.root.style.height="-moz-calc( 100% - "+b+" - 2px )",c.root.style.height="-webkit-calc( 100% - "+b+" - 2px )",c.root.style.height="calc( 100% - "+b+" - 2px )"))}};a.prototype.setAreaSize=function(b,a){var c=this.sections[1];c.root.style.width="-moz-calc( 100% - "+a+" - 2px )";c.root.style.width="-webkit-calc( 100% - "+a+" - 2px )";c.root.style.width="calc( 100% - "+a+" - 2px )"};a.prototype.merge=function(b){if(0==this.sections.length)throw"not splitted";b=this.sections[b||0];this.root.appendChild(b.content);
this.content=b.content;this.root.removeChild(this.sections[0].root);this.root.removeChild(this.sections[1].root);this.sections=[];this._computed_size=null;this.resize()};a.prototype.add=function(b){if("string"==typeof b){var a=document.createElement("div");a.innerHTML=b;b=a}this.content.appendChild(b.root||b)};a.prototype.query=function(b){return this.root.querySelector(b)};LiteGUI.Area=a;LiteGUI.Split=function(b,a,c){c=c||{};var d=document.createElement("div");this.root=d;d.id=b;d.className="litesplit "+
(c.vertical?"vsplit":"hsplit");this.sections=[];for(var g in a)b=document.createElement("div"),b.className="split-section split"+g,"number"==typeof a[g]?c.vertical?b.style.height=a[g].toFixed(1)+"%":b.style.width=a[g].toFixed(1)+"%":"string"==typeof a[g]?c.vertical?b.style.height=a[g]:b.style.width=a[g]:(a[g].id&&(b.id=a[g].id),c.vertical?b.style.height="Number"==typeof a[g].height?a[g].height.toFixed(1)+"%":a[g].height:b.style.width="Number"==typeof a[g].width?a[g].width.toFixed(1)+"%":a[g].width),
this.sections.push(b),d.appendChild(b);c.parent&&(c.parent.root?c.parent.root.appendChild(d):c.parent.appendChild(d))};LiteGUI.ContextualMenu=function(b,a){this.options=a=a||{};var c=this,d=document.createElement("div");d.className="litecontextualmenu litemenubar-panel";d.style.minWidth=100;d.style.minHeight=100;this.root=d;for(var g in b){var h=document.createElement("div");h.className="litemenu-entry submenu";h.dataset.value=b[g];h.innerHTML=b.constructor==Array?b[g]:g;d.appendChild(h)}$(d).find(".litemenu-entry").click(function(b){b=
this.dataset.value;a.callback&&a.callback.call(c,b);document.body.removeChild(d)});$(d).mouseleave(function(b){document.body.removeChild(d)});document.body.appendChild(d);g=a.left||0;h=a.top||0;if(a.event){g=a.event.pageX-10;var h=a.event.pageY-10,k=document.body.getClientRects()[0];g>k.width-$(d).width()-10&&(g=k.width-$(d).width()-10);h>k.height-$(d).height()-10&&(h=k.height-$(d).height()-10)}d.style.left=g+"px";d.style.top=h+"px"};LiteGUI.createLitebox=function(b,a){var c=document.createElement("span");
c.className="listbox "+(b?"listopen":"listclosed");c.innerHTML=b?"&#9660;":"&#9658;";c.dataset.value=b?"open":"closed";c.addEventListener("click",function(b){console.log("CLICK");b.target.setValue("open"==this.dataset.value?!1:!0)});c.on_change_callback=a;c.setEmpty=function(b){b?this.classList.add("empty"):this.classList.remove("empty")};c.setValue=function(b){this.dataset.value!=(b?"open":"closed")&&(b?(this.dataset.value="open",this.innerHTML="&#9660;",this.classList.add("listopen"),this.classList.remove("listclosed")):
(this.dataset.value="closed",this.innerHTML="&#9658;",this.classList.remove("listopen"),this.classList.add("listclosed")),a&&a(this.dataset.value))};return c};LiteGUI.List=function(b,a,c){c=c||{};var d=document.createElement("ul");this.root=d;d.id=b;d.className="litelist";this.items=[];var g=this;this.callback=c.callback;for(var h in a){b=document.createElement("li");b.className="list-item";b.data=a[h];var k="";"string"==typeof a[h]?k=a[h]+"<span class='arrow'></span>":(k=(a[h].name||a[h].title||
"")+"<span class='arrow'></span>",a[h].id&&(b.id=a[h].id));b.innerHTML=k;d.appendChild(b)}$(d).find(".list-item").click(function(){$(d).find(".list-item.selected").removeClass("selected");$(this).addClass("selected");$(g.root).trigger("wchanged",this);g.callback&&g.callback(this.data)});c.parent&&(c.parent.root?$(c.parent.root).append(d):$(c.parent).append(d))};LiteGUI.Slider=function(b,a){function c(b){var d=h.getClientRects()[0].width,e=a.min||0;k.setValue(b/d*((a.max||1)-e)+e)}function d(b){var a=
h.getClientRects()[0];c((void 0===b.x?b.pageX:b.x)-a.left);b.preventDefault();return!1}function g(b){document.removeEventListener("mousemove",d);document.removeEventListener("mouseup",g);b.preventDefault();return!1}a=a||{};var h=document.createElement("canvas");h.className="slider "+(a.extraclass?a.extraclass:"");h.width=100;h.height=1;h.style.position="relative";h.style.width="calc( 100% - 2em )";h.style.height="1.2em";this.root=h;var k=this;this.value=b;this.setValue=function(b){var c=h.getContext("2d"),
d=a.min||0,e=a.max||1;b<d?b=d:b>e&&(b=e);d=(b-d)/(e-d);c.clearRect(0,0,h.width,h.height);c.fillStyle="#999";c.fillRect(0,0,h.width*d,h.height);c.fillStyle="#DA2";c.fillRect(h.width*d-1,0,2,h.height);b!=this.value&&(this.value=b,$(this.root).trigger("change",b))};h.addEventListener("mousedown",function(b){var a;b.offsetX?a=b.offsetX:b.layerX&&(a=b.layerX);c(a);document.addEventListener("mousemove",d);document.addEventListener("mouseup",g)});this.setValue(b)};LiteGUI.LineEditor=function(b,a){function c(b){return[n.width*
((l.xrange[1]-l.xrange[0])*b[0]+l.xrange[0]),n.height*((l.yrange[1]-l.yrange[0])*b[1]+l.yrange[0])]}function d(b){return[(b[0]/n.width-l.xrange[0])/(l.xrange[1]-l.xrange[0]),(b[1]/n.height-l.yrange[0])/(l.yrange[1]-l.yrange[0])]}function g(b){var a=n.getBoundingClientRect(),c=b.clientX-a.left,f=b.clientY-a.top;0>c?c=0:c>n.width&&(c=n.width);0>f?f=0:f>n.height&&(f=n.height);if(-1!=q&&m([b.clientX-a.left,b.clientY-a.top],[c,f])>0.5*n.height)l.value.splice(q,1),h(b);else{a=d([-(t[0]-c),t[1]-f]);if(-1!=
q){var e=l.xrange[0],g=l.xrange[1];l.no_trespassing&&(0<q&&(e=l.value[q-1][0]),q<l.value.length-1&&(g=l.value[q+1][0]));var s=l.value[q];s[0]+=a[0];s[1]+=a[1];s[0]<e?s[0]=e:s[0]>g&&(s[0]=g);s[1]<l.yrange[0]?s[1]=l.yrange[0]:s[1]>l.yrange[1]&&(s[1]=l.yrange[1])}p();l.redraw();t[0]=c;t[1]=f;k();b.preventDefault();b.stopPropagation()}}function h(b){q=-1;l.redraw();$(document).unbind("mousemove",g);$(document).unbind("mouseup",h);k();b.preventDefault();b.stopPropagation()}function k(){a.callback?a.callback.call(l,
l.value):$(l).change()}function m(b,a){return Math.sqrt(Math.pow(a[0]-b[0],2)+Math.pow(a[1]-b[1],2))}function p(){var b=null;-1!=q&&(b=l.value[q]);l.value.sort(function(b,a){return b[0]>a[0]});b&&(q=l.value.indexOf(b))}a=a||{};var l=document.createElement("div");l.className="curve "+(a.extraclass?a.extraclass:"");l.style.minHeight="50px";l.style.width=a.width||"100%";l.bgcolor=a.bgcolor||"#222";l.pointscolor=a.pointscolor||"#5AF";l.linecolor=a.linecolor||"#444";l.value=b||[];l.xrange=a.xrange||[0,
1];l.yrange=a.yrange||[0,1];l.defaulty=null!=a.defaulty?a.defaulty:0.5;l.no_trespassing=a.no_trespassing||!1;l.show_samples=a.show_samples||0;l.options=a;var n=document.createElement("canvas");n.width=a.width||200;n.height=a.height||50;l.appendChild(n);l.canvas=n;$(n).bind("mousedown",function(b){$(document).bind("mousemove",g);$(document).bind("mouseup",h);for(var a=n.getBoundingClientRect(),f=b.clientX-a.left,a=b.clientY-a.top,k=n.height-a,v=1E5,w=-1,s=0;s<l.value.length;s++){var u=c(l.value[s]),
u=m([f,k],u);u<v&&8>u&&(v=u,w=s)}q=w;-1==q&&(k=d([f,n.height-a]),l.value.push(k),p(),q=l.value.indexOf(k));t=[f,a];l.redraw();b.preventDefault();b.stopPropagation()});$(l).resize(function(b){n.width=$(this).width();n.height=$(this).height();l.redraw()});l.getValueAt=function(b){if(b<l.xrange[0]||b>l.xrange[1])return l.defaulty;for(var a=[l.xrange[0],l.defaulty],c=0,c=0;c<l.value.length;c+=1){var f=l.value[c];if(b==f[0])return f[1];if(b<f[0])return c=(b-a[0])/(f[0]-a[0]),a[1]*(1-c)+f[1]*c;a=f}f=[l.xrange[1],
l.defaulty];c=(b-a[0])/(f[0]-a[0]);return a[1]*(1-c)+f[1]*c};l.resample=function(b){var a=[];b=(l.xrange[1]-l.xrange[0])/b;for(var c=l.xrange[0];c<=l.xrange[1];c+=b)a.push(l.getValueAt(c));return a};l.addValue=function(b){for(var a=0;a<l.value;a++)if(!(l.value[a][0]<b[0])){l.value.splice(a,0,b);redraw();return}l.value.push(b);redraw()};var q=-1;l.redraw=function(){var b=n.getContext("2d");b.setTransform(1,0,0,1,0,0);b.translate(0,n.height);b.scale(1,-1);b.fillStyle=l.bgcolor;b.fillRect(0,0,n.width,
n.height);b.strokeStyle=l.linecolor;b.beginPath();var a=c([l.xrange[0],l.defaulty]);b.moveTo(a[0],a[1]);for(var f in l.value)a=l.value[f],a=c(a),b.lineTo(a[0],a[1]);a=c([l.xrange[1],l.defaulty]);b.lineTo(a[0],a[1]);b.stroke();for(f=0;f<l.value.length;f+=1)a=l.value[f],a=c(a),b.fillStyle=q==f?"white":l.pointscolor,b.beginPath(),b.arc(a[0],a[1],q==f?4:2,0,2*Math.PI),b.fill();if(l.show_samples){var d=l.resample(l.show_samples);b.fillStyle="#888";for(f=0;f<d.length;f+=1)a=[(l.xrange[1]-l.xrange[0])/l.show_samples*
f+l.xrange[0],d[f]],a=c(a),b.beginPath(),b.arc(a[0],a[1],2,0,2*Math.PI),b.fill()}};var t=[0,0];l.redraw();return l}})();
(function(){function c(a){this.menu=[];this.panels=[];this.root=document.createElement("div");this.root.id=a;this.root.className="litemenubar";this.content=document.createElement("ul");this.root.appendChild(this.content);this.is_open=!1}c.closing_time=500;c.prototype.clear=function(){$(this.content).empty();this.menu=[];this.panels=[]};c.prototype.attachToPanel=function(a){$(a.content).prepend(this.root)};c.prototype.add=function(a,b){b=b||{};for(var c=this.menu.length,e=a.split("/"),d=0,g=0,h=this.menu;h;){if(5<
d)throw"Error: Menubar too deep";if(h.length==g){g={children:[]};d==e.length-1&&(g.data=b);g.disable=function(){this.data&&(this.data.disabled=!0)};g.enable=function(){this.data&&delete this.data.disabled};g.name=e[d];h.push(g);d++;if(d==e.length)break;g.children=[];h=g.children;g=0}else{if(h[g]&&e[d]==h[g].name)if(d<e.length-1){h=h[g].children;g=0;d++;continue}else{console.warn("Warning: Adding menu that already exists: "+a);break}g++}}c!=this.menu.length&&this.updateMenu()};c.prototype.separator=
function(a,b){var c=this.findMenu(a);c&&c.push({separator:!0,order:b||10})};c.prototype.findMenu=function(a){a=a.split("/");for(var b=0,c=0,e=this.menu;e;){if(b==a.length)return e;if(e.length<=c)break;if("*"==a[b])return e[c].children;if(a[b]==e[c].name)if(b<a.length){e=e[c].children;c=0;b++;continue}else return e[c];c++}return null};c.prototype.updateMenu=function(){var a=this;$(this.content).empty();for(var b in this.menu){var c=document.createElement("li");c.innerHTML="<span class='icon'></span><span class='name'>"+
this.menu[b].name+"</span>";this.content.appendChild(c);c.data=this.menu[b];this.menu[b].element=c;$(c).bind("click",function(b){var c=this.data;c.data&&c.data.callback&&"function"==typeof c.data.callback&&c.data.callback(c.data);a.is_open?(a.is_open=!1,a.hidePanels()):(a.is_open=!0,a.showMenu(c,b,this))});$(c).bind("mouseover",function(b){a.hidePanels();a.is_open&&a.showMenu(this.data,b,this)})}};c.prototype.hidePanels=function(){if(this.panels.length){for(var a in this.panels)$(this.panels[a]).remove();
this.panels=[]}};c.prototype.showMenu=function(a,b,c,e){e||this.hidePanels();if(a.children&&a.children.length){var d=this;d.closing_by_leave&&clearInterval(d.closing_by_leave);var g=document.createElement("div");g.className="litemenubar-panel";var h=[],k;for(k in a.children)h.push(a.children[k]);h.sort(function(b,a){var c=10,f=10;b&&b.data&&null!=b.data.order&&(c=b.data.order);b&&b.separator&&null!=b.order&&(c=b.order);a&&a.data&&null!=a.data.order&&(f=a.data.order);a&&a.separator&&null!=a.order&&
(f=a.order);return c-f});for(k in h){a=document.createElement("p");var m=h[k];a.className="litemenu-entry "+(a.children?" submenu":"");a.innerHTML=m&&m.name?"<span class='icon'></span><span class='name'>"+m.name+(m.children&&m.children.length?"<span class='more'>+</span>":"")+"</span>":"<span class='separator'></span>";a.data=m;if(a.data.data){m=a.data.data;if("checkbox"==m.type&&m.instance&&m.property&&!0==m.instance[m.property]||!0==m.checkbox||m.instance&&m.property&&m.hasOwnProperty("value")&&
m.instance[m.property]==m.value||"function"==typeof m.isChecked&&m.isChecked.call(m.instance,m))a.className+=" checked";m.disabled&&(a.className+=" disabled")}$(a).bind("click",function(){var a=this.data;if(a.data){if(a.data.disabled)return;a.data.instance&&a.data.property&&("checkbox"==a.data.type?(a.data.instance[a.data.property]=!a.data.instance[a.data.property],a.data.instance[a.data.property]?$(this).addClass("checked"):$(this).removeClass("checked")):a.data.hasOwnProperty("value")&&(a.data.instance[a.data.property]=
a.data.value));null!=a.data.checkbox&&(a.data.checkbox=!a.data.checkbox,a.data.checkbox?$(this).addClass("checked"):$(this).removeClass("checked"));a.data.callback&&"function"==typeof a.data.callback&&a.data.callback(a.data)}a.children&&a.children.length?d.showMenu(a,b,this,!0):(d.is_open=!1,d.hidePanels())});$(g).append(a)}$(g).bind("mouseleave",function(b){d.closing_by_leave&&clearInterval(d.closing_by_leave);d.closing_by_leave=setTimeout(function(){d.is_open=!1;d.hidePanels()},LiteGUI.Menubar.closing_time)});
$(g).bind("mouseenter",function(b){d.closing_by_leave&&clearInterval(d.closing_by_leave);d.closing_by_leave=null});c=$(c);g.style.left=c.offset().left+(e?200:0)+"px";g.style.top=c.offset().top+c.height()+(e?-20:2)+"px";this.panels.push(g);$(document.body).append(g);$(g).hide().show()}};LiteGUI.Menubar=c})();
(function(){function c(a,b){this.options=b=b||{};var c=this.mode=b.mode||"horizontal",e=document.createElement("DIV");a&&(e.id=a);e.data=this;e.className="litetabs "+c;this.root=e;this.root.tabs=this;this.current_tab=null;"horizontal"==c?b.size&&(this.root.style.height="full"==b.size?"100%":b.size):"vertical"==c&&b.size&&(this.root.style.width="full"==b.size?"100%":b.size);e=document.createElement("UL");e.className="wtabcontainer";"vertical"==c?e.style.width=LiteGUI.Tabs.tabs_width+"px":e.style.height=
LiteGUI.Tabs.tabs_height+"px";this.list=e;this.root.appendChild(this.list);this.tabs={};this.selected=null;this.onchange=b.callback;b.parent&&this.appendTo(b.parent)}c.tabs_width=64;c.tabs_height=26;c.prototype.show=function(){this.root.style.display="block"};c.prototype.hide=function(){this.root.style.display="none"};c.prototype.getCurrentTab=function(){return this.current_tab};c.prototype.appendTo=function(a,b){b?$(a).prepend(this.root):$(a).append(this.root)};c.prototype.getTab=function(a){return this.tabs[a]};
c.prototype.getTabContent=function(a){if(a=this.tabs[a])return a.content};c.prototype.getTabIndex=function(a){a=this.tabs[a];if(!a)return-1;for(var b=0;b<this.list.childNodes.length;b++)if(this.list.childNodes[b]==a.tab)return b;return-1};c.prototype.addTab=function(a,b){b=b||{};var f=this,e=document.createElement("LI");e.className="wtab wtab-"+a.replace(/ /gi,"_");e.data=a;e.innerHTML="<span class='tabtitle'>"+(b.title||a)+"</span>";b.bigicon&&(e.innerHTML="<img class='tabbigicon' src='"+b.bigicon+
"'/>"+e.innerHTML);b.closable&&(e.innerHTML+="<span class='tabclose'>X</span>",e.querySelector("span.tabclose").addEventListener("click",function(b){f.removeTab(a);b.preventDefault();b.stopPropagation()},!0));b.index&&-1!=b.index?this.list.insertBefore(e,this.list.childNodes[b.index]):this.list.appendChild(e);var d=document.createElement("div");b.id&&(d.id=b.id);d.className="wtabcontent wtabcontent-"+a.replace(/ /gi,"_")+" "+(b.className||"");d.data=a;d.style.display="none";"horizontal"==this.mode?
b.size&&(d.style.overflow="auto","full"==b.size?(d.style.height="calc( 100% - "+LiteGUI.Tabs.tabs_height+"px )",d.style.height="-moz-calc( 100% - "+LiteGUI.Tabs.tabs_height+"px )",d.style.height="-webkit-calc( 100% - "+LiteGUI.Tabs.tabs_height+"px )"):d.style.height=b.size):"vertical"==this.mode&&b.size&&(d.style.overflow="auto","full"==b.size?(d.style.width="calc( 100% - "+LiteGUI.Tabs.tabs_width+"px )",d.style.width="-moz-calc( 100% - "+LiteGUI.Tabs.tabs_width+"px )",d.style.width="-webkit-calc( 100% - "+
LiteGUI.Tabs.tabs_width+"px )"):d.style.width=b.size);b.content&&("string"==typeof b.content?d.innerHTML=b.content:d.appendChild(b.content));this.root.appendChild(d);e.addEventListener("click",c.prototype.onTabClicked);e.options=b;e.tabs=this;this.list.appendChild(e);e={name:a,tab:e,content:d,add:function(b){this.content.appendChild(b.root||b)}};b.onclose&&(e.onclose=b.onclose);this.tabs[a]=e;!0!=b.selected&&null!=this.selected||this.selectTab(a);return e};c.prototype.onTabClicked=function(){if(!this.classList.contains("selected")&&
this.parentNode){var a=this.options,b=this.parentNode.parentNode.tabs;if(!b)throw"tabs not found";if(!a.callback_canopen||!1!=a.callback_canopen()){var c=this.data,e=null,d;for(d in b.tabs){var g=b.tabs[d];d==c?(g.selected=!0,$(g.content).show(),e=g.content):(delete g.selected,$(g.content).hide())}$(b.list).find("li.wtab").removeClass("selected");this.classList.add("selected");b.current_tab&&b.current_tab[0]!=c&&b.current_tab[2]&&b.current_tab[2].callback_leave&&b.current_tab[2].callback_leave(b.current_tab[0],
b.current_tab[1],b.current_tab[2]);b.current_tab=[c,e,a];a.callback&&a.callback(c,e);$(b).trigger("wchange",[c,e]);if(b.onchange)b.onchange(name,c,e);b.selected=name}}};c.prototype.selectTab=function(a){for(var b=this.list.querySelectorAll("li.wtab"),c=0;c<b.length;c++)if(a==b[c].data){$(b[c]).click();break}};c.prototype.setTabVisibility=function(a,b){var c=this.tabs[a];c&&(c.tab.style.display=b?"none":"inline-block",c.content.style.display=b?"none":"inline-block")};c.prototype.removeTab=function(a){var b=
this.tabs[a];if(b){if(b.onclose)b.onclose(b);b.tab.parentNode.removeChild(b.tab);b.content.parentNode.removeChild(b.content);delete this.tabs[a]}};c.prototype.hideTab=function(a){this.setTabVisibility(a,!1)};c.prototype.showTab=function(a){this.setTabVisibility(a,!0)};c.prototype.transferTab=function(a,b,c){var e=this.tabs[a];if(e){b.tabs[a]=e;void 0!==c?b.list.insertBefore(e.tab,b.list.childNodes[c]):b.list.appendChild(e.tab);b.root.appendChild(e.content);delete this.tabs[a];c=null;for(var d in this.tabs){c=
d;break}c&&this.selectTab(c);e.tab.classList.remove("selected");b.selectTab(a)}};c.prototype.detachTab=function(a,b,c){if(this.tabs[a]){var e=this.getTabIndex(a),d=window.open("","","width=800, height=600, location=no, status=no, menubar=no, titlebar=no, fullscreen=yes");d.document.write("<head><title>"+a+"</title>");for(var g=document.querySelectorAll("link[rel='stylesheet'],style"),h=0;h<g.length;h++)d.document.write(g[h].outerHTML);d.document.write("</head><body></body>");d.document.close();var k=
this,m=new LiteGUI.Tabs(null,this.options);d.tabs=m;d.onbeforeunload=function(){m.transferTab(a,k,e);c&&c()};m.list.style.height="20px";d.document.body.appendChild(m.root);k.transferTab(a,m);m.tabs[a].tab.classList.add("selected");b&&b();return d}};LiteGUI.Tabs=c})();
(function(){LiteGUI.Dragger=function(c,a){function b(b){var c=[b.screenX-m.data[0],m.data[1]-b.screenY];m.data=[b.screenX,b.screenY];e(c[a.horizontal?0:1],b);b.stopPropagation();b.preventDefault();return!1}function f(a){$(d).trigger("stop_dragging");$(document).unbind("mousemove",b);$(document).unbind("mouseup",f);$(m).trigger("blur");a.stopPropagation();a.preventDefault();return!1}function e(b,c){var d=a.step?a.step:1;c&&c.shiftKey?d*=10:c&&c.ctrlKey&&(d*=0.1);d=parseFloat(k.value)+b*d;null!=a.max&&
d>a.max&&(d=a.max);null!=a.min&&d<a.min&&(d=a.min);k.value=a.precision?d.toFixed(a.precision):(1E3*d<<0)/1E3;a.units&&(k.value+=a.units);$(k).change()}a=a||{};var d=document.createElement("div");d.className="dragger "+(a.extraclass?a.extraclass:"");this.root=d;var g=document.createElement("span");g.className="inputfield "+(a.extraclass?a.extraclass:"")+(a.full?" full":"");a.disabled&&(g.className+=" disabled");d.appendChild(g);var h=a.dragger_class||"full",k=document.createElement("input");k.className=
"text number "+(h?h:"");k.value=c+(a.units?a.units:"");k.tabIndex=a.tab_index;this.input=k;d.input=k;a.disabled&&(k.disabled=!0);a.tab_index&&(k.tabIndex=a.tab_index);g.appendChild(k);this.setValue=function(b){$(k).val(b).trigger("change")};$(k).bind("keydown",function(b){if(38==b.keyCode)e(1,b);else if(40==b.keyCode)e(-1,b);else return;b.stopPropagation();b.preventDefault();return!0});var m=document.createElement("div");m.className="drag_widget";a.disabled&&(m.className+=" disabled");g.appendChild(m);
d.dragger=m;$(m).bind("mousedown",function(c){$(document).unbind("mousemove",b);$(document).unbind("mouseup",f);a.disabled||($(document).bind("mousemove",b),$(document).bind("mouseup",f),m.data=[c.screenX,c.screenY],$(d).trigger("start_dragging"));c.stopPropagation();c.preventDefault()})}})();
(function(){function c(a,b,c){var e=document.createElement("div");this.root=e;a&&(e.id=a);e.className="litetree";this.tree=b;var d=this;this.options=c=c||{allow_rename:!0,drag:!0};e.addEventListener("click",function(b){if(b.srcElement==d.root&&d.onBackgroundClicked)d.onBackgroundClicked(b,d)});a=this.createTreeItem(b,c);a.className+=" root_item";this.root.appendChild(a);this.root_item=a}c.prototype.updateTree=function(a){this.root_item&&$(this.root_item).remove();a&&(a=this.createTreeItem(a,this.options),
a.className+=" root_item",this.root.appendChild(a),this.root_item=a)};c.prototype.createTreeItem=function(a,b){var c=document.createElement("li");c.className="ltreeitem";if(a.id){var e=a.id.replace(/\s/g,"_");c.className+=" ltreeitem-"+e;c.dataset.item_id=a.id}c.data=a;a.DOM=c;b=b||this.options;var d=document.createElement("div");d.className="ltreeitemtitle";a.className&&(d.className+=" "+a.className);d.innerHTML="<span class='precontent'></span><span class='incontent'>"+(a.content||a.id||"")+"</span><span class='postcontent'></span>";
if(a.dataset)for(var g in a.dataset)c.dataset[g]=a.dataset[g];c.appendChild(d);c.title_element=d;e=c.querySelector(".ltreeitemtitle .incontent");e.addEventListener("click",function(b){var a=this.parentNode,c=a.parentNode;if(!a._editing){k.markAsSelected(c);LiteGUI.trigger(k.root,"item_selected",{item:c,data:c.data});if(k.onItemSelected)k.onItemSelected(c.data,c);c.callback&&c.callback.call(k,c);b.preventDefault();b.stopPropagation()}});e.addEventListener("dblclick",function(b){var a=this.parentNode;
LiteGUI.trigger(k.root,"item_dblclicked",a);if(!this._editing&&k.options.allow_rename){this._editing=!0;this._old_name=this.innerHTML;var c=this;this.innerHTML="<input type='text' value='"+this.innerHTML+"' />";var d=this.querySelector("input");$(d).blur(function(b){var d=b.target.value;setTimeout(function(){c.innerHTML=d},1);delete c._editing;LiteGUI.trigger(k.root,"item_renamed",{old_name:c._old_name,new_name:d,item:a,data:a.data});delete c._old_name});d.addEventListener("keydown",function(b){13==
b.keyCode&&$(this).blur()});$(d).focus();b.preventDefault()}b.preventDefault();b.stopPropagation()});e.addEventListener("contextmenu",function(b){if(k.onContextMenu&&2==b.button&&k.onContextMenu)k.onContextMenu(b);b.preventDefault();return!1});e=document.createElement("ul");e.className="ltreeitemchildren";c.children_element=e;c.list=e;if(a.children)for(g in a.children){var h=this.createTreeItem(a.children[g],b);e.appendChild(h)}c.appendChild(e);this.updateListBox(c);var k=this;d.draggable=!0;d.addEventListener("dragstart",
function(b){b.dataTransfer.setData("item_id",this.parentNode.dataset.item_id)});d.addEventListener("dragenter",function(b){b.preventDefault();if(a.skipdrag)return!1;d.classList.add("dragover")});d.addEventListener("dragleave",function(b){b.preventDefault();d.classList.remove("dragover")});d.addEventListener("dragover",function(b){b.preventDefault()});d.addEventListener("drop",function(b){$(d).removeClass("dragover");b.preventDefault();if(a.skipdrag)return!1;var c=b.dataTransfer.getData("item_id");
if(""!=c)try{var f=this.parentNode.dataset.item_id;(!k.onMoveItem||k.onMoveItem&&!1!=k.onMoveItem(k.getItem(c),k.getItem(f)))&&k.moveItem(c,f)&&LiteGUI.trigger(k.root,"item_moved",{item:k.getItem(c),parent_item:k.getItem(f)})}catch(e){console.error("Error: "+e)}else LiteGUI.trigger(k.root,"drop_on_item",{item:this,event:b})});return c};c.prototype.filterByName=function(a){for(var b=this.root.querySelectorAll(".ltreeitemtitle .incontent"),c=0;c<b.length;c++){var e=b[c];if(e){var d=e.innerHTML,e=e.parentNode;
a&&-1==d.indexOf(a)?(e.style.display="none",e.parentNode.style.paddingLeft=0):(e.style.display="block",e.parentNode.style.paddingLeft=null)}}};c.onClickBox=function(a){a=this.children_element;a.style.display="none"==a.style.display?"block":"none"};c.prototype.getItem=function(a){a=a.replace(/\s/g,"_");a=this.root.querySelector(".ltreeitem-"+a);if(!a)return null;if(!a.classList.contains("ltreeitem"))throw"this node is not a tree item";return a};c.prototype.expandItem=function(a){(a=this.getItem(a))&&
a.listbox&&listbox.setValue(!0)};c.prototype.contractItem=function(a){(a=this.getItem(a))&&a.listbox&&listbox.setValue(!1)};c.prototype.setSelectedItem=function(a){if(a){a=this.getItem(a);if(!a)return null;this.markAsSelected(a);return a}this.root.classList.remove("selected");(a=this.root.querySelector(".ltreeitemtitle.selected"))&&a.classList.remove("selected");a=this.root.querySelectorAll(".ltreeitemtitle.semiselected");for(var b=0;b<a.length;b++)a[b].classList.remove("semiselected")};c.prototype.markAsSelected=
function(a){if(!a.classList.contains("selected")){this.root.classList.remove("selected");var b=this.root.querySelector(".ltreeitemtitle.selected");b&&b.classList.remove("selected");for(var b=this.root.querySelectorAll(".ltreeitemtitle.semiselected"),c=0;c<b.length;c++)b[c].classList.remove("semiselected");a.title_element.classList.add("selected");for(a=a.parentNode.parentNode;a&&a.classList.contains("ltreeitem");)a.title_element.classList.add("semiselected"),a=a.parentNode.parentNode}};c.prototype.getSelectedItem=
function(){return this.root.querySelector(".ltreeitemtitle.selected")};c.prototype.insertItem=function(a,b,c,e){var d=this.root_item;if(b&&(d="string"==typeof b?this.getItem(b):b,!d))return null;if(!d.classList.contains("ltreeitem"))throw"this node is not a tree item";a=this.createTreeItem(a,e);void 0==c?d.list.appendChild(a):d.list.insertBefore(a,d.list.childNodes[c]);this.updateListBox(d);return a};c.prototype.updateListBox=function(a){if(!a.listbox){var b=a.title_element.querySelector(".precontent"),
f=LiteGUI.createLitebox(!0,c.onClickBox.bind(a));f.setEmpty(!0);b.appendChild(f);a.listbox=f}(b=this.getChildren(a))&&(b.length?a.listbox.setEmpty(!1):a.listbox.setEmpty(!0))};c.prototype.getChildren=function(a){"string"==typeof a&&this.getItem(a);if(!a||!a.list)return null;a=a.list.childNodes;var b=[],c;for(c in a){var e=a[c];"li"==e.localName&&e.classList.contains("ltreeitem")&&b.push(e)}return b};c.prototype.getParent=function(a){"string"==typeof a&&this.getItem(a);if(!a)return null;for(a=a.parentNode;a;){if(a.classList.contains("ltreeitem"))return a;
a=a.parentNode}return null};c.prototype.moveItem=function(a,b){var c=this.getItem(b),e=this.getItem(a),d=this.getParent(e);if(!c||!e)return!1;if(c!=d)return c.list.appendChild(e),this.updateListBox(c),d&&this.updateListBox(d),!0};c.prototype.removeItem=function(a){var b=a;"string"==typeof a&&(b=this.getItem(a));if(!b)return null;(a=this.getParent(b))&&a.list&&(a.list.removeChild(b),a&&this.updateListBox(a))};c.prototype.updateItem=function(a,b){var c=this.getItem(a);c&&(c.data=b,b.id&&(c.id=b.id),
b.content&&(c.title_element.querySelector(".incontent").innerHTML=b.content))};c.prototype.clear=function(a){$(a?this.root_item:this.root).find(".ltreeitem").remove()};LiteGUI.Tree=c})();
(function(){function c(b,a){a=a||{};this._ctor(b,a)}function a(b,a){this._ctor(b,a)}c.title_height="20px";c.prototype._ctor=function(b,a){this.content=a.content||"";var c=this.root=document.createElement("div");b&&(c.id=b);c.className="litepanel "+(a.className||"");c.data=this;var d="";a.title&&(d+="<div class='panel-header'>"+a.title+"</div>");d+="<div class='content'>"+this.content+"</div>";c.innerHTML=d+"<div class='panel-footer'></div>";a.title&&(this.header=this.root.querySelector(".panel-header"));
this.content=this.root.querySelector(".content");this.footer=this.root.querySelector(".panel-footer");!0==a.scroll&&(this.content.style.overflow="auto")};c.prototype.add=function(b){this.content.appendChild(b.root)};a.MINIMIZED_WIDTH=200;a.title_height="20px";a.prototype._ctor=function(b,a){this.width=a.width;this.height=a.height;this.minWidth=a.minWidth||150;this.minHeight=a.minHeight||100;this.content=a.content||"";var c=document.createElement("div");b&&(c.id=b);c.className="litedialog "+(a.className||
"");c.data=this;var d="";a.title&&(d+="<div class='panel-header'>"+a.title+"</div><div class='buttons'>",a.minimize&&(d+="<button class='mini-button minimize-button'></button><button class='mini-button maximize-button' style='display:none'></button>"),a.hide&&(d+="<button class='mini-button hide-button'></button>"),a.close&&(d+="<button class='mini-button close-button'></button>"),d+="</div>");d+="<div class='content'>"+this.content+"</div>";d+="<div class='panel-footer'></div>";c.innerHTML=d;this.root=
c;this.content=$(c).find(".content")[0];this.footer=$(c).find(".panel-footer")[0];if(a.buttons)for(var g in a.buttons)this.addButton(a.buttons[g].name,a.buttons[g]);!0==a.scroll&&(this.content.style.overflow="auto");$(c).find(".close-button").bind("click",this.close.bind(this));$(c).find(".minimize-button").bind("click",this.minimize.bind(this));$(c).find(".maximize-button").bind("click",this.maximize.bind(this));$(c).find(".hide-button").bind("click",this.hide.bind(this));this.makeDialog(a)};a.prototype.add=
function(b){this.content.appendChild(b.root)};a.prototype.makeDialog=function(b){b=b||{};var a=this.root;a.style.position="absolute";a.style.minWidth=this.minWidth+"px";a.style.minHeight=this.minHeight+"px";this.width&&(a.style.width=this.width+"px");this.height&&("number"==typeof this.height?a.style.height=this.height+"px":-1!=this.height.indexOf("%")&&(a.style.height=this.height),this.content.style.height="calc( "+this.height+" - 24px )");a.style.boxShadow="0 0 3px black";b.draggable&&(this.draggable=
!0,LiteGUI.draggable(a,a.querySelector(".panel-header")));b.resizable&&this.setResizable();a=null;b.parent&&(a="string"==typeof b.parent?document.querySelector(b.parent):b.parent);a||(a=LiteGUI.root);a.appendChild(this.root);this.center()};a.prototype.setResizable=function(){function b(c){if("mousedown"==c.type)document.body.addEventListener("mousemove",b),document.body.addEventListener("mouseup",b),d[0]=c.pageX,d[1]=c.pageY;else if("mousemove"==c.type){var e=$(a).height()-(d[1]-c.pageY);$(a).height(e+
"px");d[0]=c.pageX;d[1]=c.pageY;g.content.style.height="calc( 100% - 24px )"}else"mouseup"==c.type&&(document.body.removeEventListener("mousemove",b),document.body.removeEventListener("mouseup",b));c.preventDefault();return!1}if(!this.resizable){var a=this.root;this.resizable=!0;var c=this.footer;c.style.minHeight="4px";$(c).addClass("resizable");c.addEventListener("mousedown",b);var d=[0,0],g=this}};a.prototype.dockTo=function(b,a){if(b){var c=this.root;a=a||"full";b=b.content||b;c.style.top=0;c.style.left=
0;c.style.boxShadow="0 0 0";if("full"==a)c.style.position="relative",c.style.width="100%",c.style.height="100%",this.content.style.width="100%",this.content.style.height="calc(100% - "+LiteGUI.Panel.title_height+")",this.content.style.height="-moz-calc(100% - "+LiteGUI.Panel.title_height+")",this.content.style.height="-webkit-calc(100% - "+LiteGUI.Panel.title_height+")",this.content.style.overflow="auto";else if("left"==a||"right"==a)c.style.position="absolute",c.style.top=0,c.style[a]=0,c.style.width=
this.width+"px",c.style.height="100%",this.content.style.height="-moz-calc(100% - "+LiteGUI.Panel.title_height+")",this.content.style.height="-webkit-calc(100% - "+LiteGUI.Panel.title_height+")",this.content.style.height="calc(100% - "+LiteGUI.Panel.title_height+")",this.content.style.overflow="auto","right"==a&&(c.style.left="auto",c.style.right=0);else if("bottom"==a||"top"==a)c.style.width="100%",c.style.height=this.height+"px","bottom"==a&&(c.style.bottom=0,c.style.top="auto");this.draggable&&
$(c).draggable({disabled:!0});b.content?b.content.appendChild(c):"string"==typeof b?$(b).append(c):b.appendChild(c)}};a.prototype.addButton=function(b,a){var c=this,d=document.createElement("button");d.innerHTML=b;a.className&&(d.className=a.className);$(this.root).find(".panel-footer").append(d);$(d).bind("click",function(b){a.callback&&a.callback(this);a.close&&c.close()});return d};a.prototype.close=function(){$(this.root).remove();$(this).trigger("closed")};a.minimized=[];a.prototype.minimize=
function(){this.minimized||(this.minimized=!0,this.old_pos=$(this.root).position(),$(this.root).find(".content").hide(),$(this.root).draggable({disabled:!0}),$(this.root).find(".minimize-button").hide(),$(this.root).find(".maximize-button").show(),$(this.root).css({width:LiteGUI.Dialog.MINIMIZED_WIDTH}),$(this).bind("closed",function(){LiteGUI.Dialog.minimized.splice(LiteGUI.Dialog.minimized.indexOf(this),1);LiteGUI.Dialog.arrangeMinimized()}),LiteGUI.Dialog.minimized.push(this),LiteGUI.Dialog.arrangeMinimized(),
$(this).trigger("minimizing"))};a.arrangeMinimized=function(){for(var b in LiteGUI.Dialog.minimized){var a=$(LiteGUI.Dialog.minimized[b].root.parentNode).height()-20;$(panel.root).animate({left:LiteGUI.Dialog.MINIMIZED_WIDTH*b,top:a+"px"},100)}};a.prototype.maximize=function(){this.minimized&&(this.minimized=!1,$(this.root).find(".content").show(),$(this.root).draggable({disabled:!1}),$(this.root).animate({left:this.old_pos.left+"px",top:this.old_pos.top+"px",width:this.width},100),$(this.root).find(".minimize-button").show(),
$(this.root).find(".maximize-button").hide(),LiteGUI.Dialog.minimized.splice(LiteGUI.Dialog.minimized.indexOf(this),1),LiteGUI.Dialog.arrangeMinimized(),$(this).trigger("maximizing"))};a.prototype.makeModal=function(){LiteGUI.showModalBackground(!0);LiteGUI.modalbg_div.appendChild(this.root);this.show();this.center();$(this).bind("closed",function(b){LiteGUI.showModalBackground(!1)})};a.prototype.bringToFront=function(){var b=$(this.root).parent();b.detach(this.root);b.attach(this.root)};a.prototype.show=
function(b,a){this.root.parentNode||LiteGUI.add(this);$(this.root).show();$(this).trigger("shown")};a.prototype.hide=function(b,a){$(this.root).hide();$(this).trigger("hidden")};a.prototype.setPosition=function(b,a){this.root.position="absolute";this.root.style.left=b+"px";this.root.style.top=a+"px"};a.prototype.setSize=function(b,a){this.root.style.width=b+"px";this.root.style.height=a+"px"};a.prototype.center=function(){this.root.position="absolute";this.root.style.left=Math.floor(0.5*($(this.root.parentNode).width()-
$(this.root).width()))+"px";this.root.style.top=Math.floor(0.5*($(this.root.parentNode).height()-$(this.root).height()))+"px"};a.prototype.adjustSize=function(a){a=a||0;this.content.style.height="auto";var c=$(this.content).width();a=$(this.content).height()+20+a;this.setSize(c,a)};LiteGUI.Panel=c;LiteGUI.Dialog=a})();jQuery.fn.wchange=function(c){$(this[0]).on("wchange",c)};jQuery.fn.wclick=function(c){$(this[0]).on("wclick",c)};
function Inspector(c,a){a=a||{};this.root=document.createElement("DIV");this.root.className="inspector "+(a.full?"full":"");a.one_line&&(this.root.className+=" one-line");c&&(this.root.id=c);this.values={};this.sections=[];this.widgets={};this.addSection();this.tab_index=Math.floor(1E4*Math.random());a.name_width&&(this.name_width=a.name_width);a.parent&&this.appendTo(a.parent);this.widgets_per_row=a.widgets_per_row||1}Inspector.prototype.appendTo=function(c,a){a?$(c).prepend(this.root):$(c).append(this.root)};
Inspector.prototype.clear=function(){purgeElement(this.root,!0);$(this.root).empty();this.sections=[];this.values={};this.widgets={};this.addSection()};Inspector.prototype.append=function(c,a){var b=this.root;this.current_group_content?b=this.current_group_content:this.current_section_content&&(b=this.current_section_content);a&&a.replace?a.replace.parentNode.replaceChild(c,a.replace):b.appendChild(c)};
Inspector.prototype.setup=function(c){for(var a in c){var b=c[a];this.add(b.type,b.name,b.value,b.options)}};
Inspector.prototype.inspectInstance=function(c,a,b){function f(a,b){b=b||{};for(var c in a)b[c]=a[c];return b}if(c){a=!a&&c.getAttributes?c.getAttributes():this.collectAttributes(c);var e=c.constructor;!b&&e.attributes&&(b=e.attributes);var d={},g;for(g in a)if(b&&b[g])d[g]=f(b[g]);else{var h=a[g];if(e["@"+g])d[g]=f(e["@"+g]);else if(c["@"+g])d[g]=c["@"+g];else if("number"==typeof h)d[g]={type:"number",step:0.1};else if("string"==typeof h)d[g]={type:"string"};else if("boolean"==typeof h)d[g]={type:"boolean"};
else if(h&&h.length)switch(h.length){case 2:d[g]={type:"vec2",step:0.1};break;case 3:d[g]={type:"vec3",step:0.1};break;case 4:d[g]={type:"vec4",step:0.1}}}return this.showAttributes(c,d)}};Inspector.prototype.collectAttributes=function(c){var a={},b;for(b in c)if("_"!=b[0]&&"@"!=b[0]&&"jQuery"!=b.substr(0,6)){var f=c[b];f&&f.constructor==Function||(a[b]=f)}return a};
Inspector.prototype.showAttributes=function(c,a){for(var b in a){var f=a[b];f.callback||(f.callback=Inspector.assignValue.bind({instance:c,name:b,options:f}));f.instance=c;this.add(f.type||f.widget||"string",b,c[b],f)}if(c.constructor.widgets)for(b in c.constructor.widgets)f=c.constructor.widgets[b],this.add(f.widget,f.name,f.value,f);if(c.onShowAttributes)c.onShowAttributes(this);if(c.constructor.onShowAttributes)c.constructor.onShowAttributes(c,this)};
Inspector.assignValue=function(c){var a=this.instance,b=a[this.name];if(null==b||null==c||"enum"==this.options.type)a[this.name]=c;else if("number"==typeof b)a[this.name]=parseFloat(c);else if("string"==typeof b)a[this.name]=c;else if(c&&c.length&&b&&b.length)for(a=0;a<c.length;++a)b[a]=c[a];else a[this.name]=c};
Inspector.prototype.createWidget=function(c,a,b){b=b||{};a=a||"";var f=document.createElement("DIV");f.className="widget "+(b.className||"");f.inspector=this;f.options=b;f.name=c;b.width&&(f.style.width="string"==typeof b.width?b.width:b.width+"px",f.style.minWidth=f.style.width);c&&(this.widgets[c]=f);1!=this.widgets_per_row&&(b.width||(f.style.width=(100/this.widgets_per_row).toFixed(2)+"%"),f.style.display="inline-block");var e="",d="";null!=c&&(this.name_width||b.name_width)&&(d=this.name_width||
b.name_width,"number"==typeof d&&(d=d.toFixed()+"px"),e="style='width: calc("+d+" - 0px); width: -webkit-calc("+d+" - 0px); width: -moz-calc("+d+" - 0px); '",d="style='width: calc( 100% - "+d+"); width: -webkit-calc(100% - "+d+"); width: -moz-calc( 100% - "+d+"); '");b="";var g="wcontent ";null==c?g+=" full":b=""==c?"<span class='wname' title='"+c+"' "+e+"></span>":"<span class='wname' title='"+c+"' "+e+">"+c+"<span class='filling'>....................</span> </span>";"string"==typeof a?f.innerHTML=
b+"<span class='info_content "+g+"' "+d+">"+a+"</span>":(f.innerHTML=b+"<span class='info_content "+g+"' "+d+"></span>",$(f).find("span.info_content").append(a));return f};Inspector.onWidgetChange=function(c,a,b,f){this.values[a]=b;$(this.current_section).trigger("wchange",b);var e=null;f.callback&&(e=f.callback.call(c,b));$(c).trigger("wchange",b);if(this.onchange)this.onchange(a,b,c);return e};
Inspector.widget_constructors={title:"addTitle",info:"addInfo",number:"addNumber",slider:"addSlider",string:"addString",text:"addString",textarea:"addTextarea",color:"addColor","boolean":"addCheckbox",checkbox:"addCheckbox",vec2:"addVector2",vector2:"addVector2",vec3:"addVector3",vector3:"addVector3",vec4:"addVector4",vector4:"addVector4","enum":"addCombo",combo:"addCombo",button:"addButton",buttons:"addButtons",file:"addFile",line:"addLine",list:"addList",tree:"addTree",datatree:"addDataTree",separator:"addSeparator"};
Inspector.registerWidget=function(c,a){var b="add"+c.charAt(0).toUpperCase()+c.slice(1);Inspector.prototype[b]=a;Inspector.widget_constructors[c]=b};
Inspector.prototype.add=function(c,a,b,f){"object"==typeof c&&1==arguments.length&&(f=c,c=f.type,a=f.name,b=f.value);var e=Inspector.widget_constructors[c];if(e){if("string"==typeof e&&(e=Inspector.prototype[e]),e&&"function"==typeof e)return"function"==typeof f&&(f={callback:f}),e.call(this,a,b,f)}else console.warn("LiteGUI.Inspector do not have a widget called",c)};Inspector.prototype.getValue=function(c){return this.values[c]};Inspector.prototype.set=function(c,a){};
Inspector.prototype.addSection=function(c,a){a=this.processOptions(a);this.current_group&&this.endGroup();var b=document.createElement("DIV");b.className="wsection";c||(b.className+=" notitle");a.className&&(b.className+=" "+a.className);var f="";c&&(f+="<div class='wsectiontitle'>"+(a.no_minimize?"":"<span class='switch-section-button'></span>")+c+"</div>");b.innerHTML=f+"<div class='wsectioncontent'></div>";this.root.appendChild(b);c&&$(b).find(".wsectiontitle").click(function(a){"button"!=a.target.localName&&
($(b).toggleClass("minimized"),$(b).find(".wsectioncontent").toggle())});this.current_section=b;this.content=this.current_section_content=$(b).find(".wsectioncontent")[0];a.widgets_per_row&&(this.widgets_per_row=a.widgets_per_row);return b};
Inspector.prototype.beginGroup=function(c,a){a=this.processOptions(a);this.current_group&&this.endGroup();var b=document.createElement("DIV");b.className="wgroup";b.innerHTML="<div class='wgroupheader "+(a.title?"wtitle":"")+"'><span class='wgrouptoggle'>-</span>"+(c||"")+"</div>";var f=document.createElement("DIV");f.className="wgroupcontent";a.collapsed&&(f.style.display="none");b.appendChild(f);var e=a.collapsed||!1;$(b).find(".wgroupheader").click(function(){$(b).find(".wgroupcontent").toggle();
e=!e;$(b).find(".wgrouptoggle").html(e?"+":"-")});this.append(b,a);this.current_group=b;this.content=this.current_group_content=f;return b};Inspector.prototype.endGroup=function(c){this.current_group_content=this.current_group=null;this.content=this.current_section_content};
Inspector.prototype.addTitle=function(c,a){a=this.processOptions(a);var b=document.createElement("DIV"),f="<span class='wtitle'><span class='text'>"+c+"</span>";a.help&&(f+="<span class='help'><div class='help-content'>"+a.help+"</div></span>");b.innerHTML=f+"</span>";b.setValue=function(a){$(this).find(".text").html(a)};this.append(b,a);return b};Inspector.prototype.addSeparator=function(){var c=document.createElement("DIV");c.className="separator";this.append(c);return c};
Inspector.prototype.addString=function(c,a,b){b=this.processOptions(b);a=a||"";var f=this;this.values[c]=a;var e="text";b.password&&(e="password");var d=this.createWidget(c,"<span class='inputfield full "+(b.disabled?"disabled":"")+"'><input type='"+e+"' tabIndex='"+this.tab_index+"' "+(b.focus?"autofocus":"")+" class='text string' value='"+a+"' "+(b.disabled?"disabled":"")+"/></span>",b);$(d).find(".wcontent input").change(function(a){a=Inspector.onWidgetChange.call(f,d,c,a.target.value,b);void 0!==
a&&$(d).find("input").val(a)});this.tab_index+=1;d.setValue=function(a){$(this).find("input").val(a).change()};d.getValue=function(){return $(this).find("input").val()};d.focus=function(){$(this).find("input").focus()};d.wchange=function(a){$(this).wchange(a)};this.append(d,b);return d};
Inspector.prototype.addStringButton=function(c,a,b){b=this.processOptions(b);a=a||"";var f=this;this.values[c]=a;var e=this.createWidget(c,"<span class='inputfield button'><input type='text' tabIndex='"+this.tab_index+"' class='text string' value='"+a+"' "+(b.disabled?"disabled":"")+"/></span><button class='micro'>"+(b.button||"...")+"</button>",b);$(e).find(".wcontent input").change(function(a){Inspector.onWidgetChange.call(f,e,c,a.target.value,b)});$(e).find(".wcontent button").click(function(a){b.callback_button&&
b.callback_button.call(e,$(e).find(".wcontent input").val())});this.tab_index+=1;this.append(e,b);e.wchange=function(a){$(this).wchange(a)};e.wclick=function(a){$(this).wclick(a)};e.setValue=function(a){$(this).find("input").val(a).change()};e.getValue=function(){return $(this).find("input").val()};e.focus=function(){$(this).find("input").focus()};return e};
Inspector.prototype.addNumber=function(c,a,b){b=this.processOptions(b);b.step||(b.step=0.1);a=a||0;var f=this;this.values[c]=a;var e=this.createWidget(c,"",b);this.append(e,b);b.extraclass="full";b.tab_index=this.tab_index;b.full=!0;this.tab_index++;a=new LiteGUI.Dragger(a,b);a.root.style.width="calc( 100% - 1px )";$(e).find(".wcontent").append(a.root);$(a.root).bind("start_dragging",function(a){this.callback_before&&this.callback_before.call(e)}.bind(b));$(e).find("input").change(function(a){f.values[c]=
a.target.value;if(b.callback){var g=b.callback.call(e,parseFloat(a.target.value));"number"==typeof g&&$(this).val(g)}$(e).trigger("wchange",a.target.value);if(f.onchange)f.onchange(c,a.target.value,e)});e.setValue=function(a){$(this).find("input").val(a).change()};e.getValue=function(){return $(this).find("input").val()};e.focus=function(){$(this).find("input").focus()};return e};
Inspector.prototype.addVector2=function(c,a,b){function f(a){this.callback_before&&this.callback_before(a)}b=this.processOptions(b);b.step||(b.step=0.1);a=a||[0,0];var e=this;this.values[c]=a;var d=this.createWidget(c,"",b);b.step=b.step||0.1;b.tab_index=this.tab_index;b.full=!0;this.tab_index++;var g=new LiteGUI.Dragger(a[0],b);g.root.style.marginLeft=0;g.root.style.width="calc( 50% - 1px )";$(d).find(".wcontent").append(g.root);b.tab_index=this.tab_index;this.tab_index++;var h=new LiteGUI.Dragger(a[1],
b);h.root.style.width="calc( 50% - 1px )";$(d).find(".wcontent").append(h.root);$(g.root).bind("start_dragging",f.bind(b));$(h.root).bind("start_dragging",f.bind(b));$(d).find("input").change(function(a){a=[];for(var f=$(d).find("input"),g=0;g<f.length;g++)a.push(parseFloat(f[g].value));e.values[c]=a;if(b.callback){var h=b.callback.call(d,a);if("object"==typeof h&&2<=h.length){for(g=0;g<f.length;g++)$(f[g]).val(h[g]);a=h}}$(d).trigger("wchange",[a]);if(e.onchange)e.onchange(c,a,d)});this.append(d,
b);d.setValue=function(a){g.setValue(a[0]);h.setValue(a[1])};return d};
Inspector.prototype.addVector3=function(c,a,b){function f(a){this.callback_before&&this.callback_before()}b=this.processOptions(b);b.step||(b.step=0.1);a=a||[0,0,0];var e=this;this.values[c]=a;var d=this.createWidget(c,"",b);b.step=b.step||0.1;b.tab_index=this.tab_index;b.full=!0;this.tab_index++;var g=new LiteGUI.Dragger(a[0],b);g.root.style.marginLeft=0;g.root.style.width="calc( 33% - 1px )";$(d).find(".wcontent").append(g.root);b.tab_index=this.tab_index;this.tab_index++;var h=new LiteGUI.Dragger(a[1],
b);h.root.style.width="calc( 33% - 1px )";$(d).find(".wcontent").append(h.root);b.tab_index=this.tab_index;this.tab_index++;var k=new LiteGUI.Dragger(a[2],b);k.root.style.width="calc( 33% - 1px )";$(d).find(".wcontent").append(k.root);$(g.root).bind("start_dragging",f.bind(b));$(h.root).bind("start_dragging",f.bind(b));$(k.root).bind("start_dragging",f.bind(b));$(d).find("input").change(function(a){a=[];for(var f=$(d).find("input"),g=0;g<f.length;g++)a.push(parseFloat(f[g].value));e.values[c]=a;if(b.callback){var k=
b.callback.call(d,a);if("object"==typeof k&&3<=k.length){for(g=0;g<f.length;g++)$(f[g]).val(k[g]);a=k}}$(d).trigger("wchange",[a]);if(e.onchange)e.onchange(c,a,d)});this.append(d,b);d.setValue=function(a){g.setValue(a[0]);h.setValue(a[1]);k.setValue(a[2])};return d};
Inspector.prototype.addVector4=function(c,a,b){function f(a){this.callback_before&&this.callback_before()}b=this.processOptions(b);b.step||(b.step=0.1);a=a||[0,0,0];var e=this;this.values[c]=a;var d=this.createWidget(c,"",b);b.step=b.step||0.1;b.tab_index=this.tab_index;b.full=!0;this.tab_index++;for(var g=[],h=0;4>h;h++){var k=new LiteGUI.Dragger(a[h],b);k.root.style.marginLeft=0;k.root.style.width="calc( 25% - 1px )";$(d).find(".wcontent").append(k.root);b.tab_index=this.tab_index;this.tab_index++;
$(k.root).bind("start_dragging",f.bind(b));g.push(k)}$(d).find("input").change(function(a){a=[];for(var f=$(d).find("input"),g=0;g<f.length;g++)a.push(parseFloat(f[g].value));e.values[c]=a;if(b.callback){var k=b.callback.call(d,a);if("object"==typeof k&&4<=k.length){for(g=0;g<f.length;g++)$(f[g]).val(k[g]);a=k}}$(d).trigger("wchange",[a]);if(e.onchange)e.onchange(c,a,d)});this.append(d,b);d.setValue=function(a){for(var b=0;b<g.length;b++)g[b].setValue(a[b])};return d};
Inspector.prototype.addTextarea=function(c,a,b){b=this.processOptions(b);a=a||"";var f=this;this.values[c]=a;var e=this.createWidget(c,"<span class='inputfield textarea "+(b.disabled?"disabled":"")+"'><textarea tabIndex='"+this.tab_index+"' "+(b.disabled?"disabled":"")+">"+a+"</textarea></span>",b);this.tab_index++;$(e).find(".wcontent textarea").on(b.inmediate?"keyup":"change",function(a){Inspector.onWidgetChange.call(f,e,c,a.target.value,b)});b.height&&$(e).find("textarea").css({height:b.height});
this.append(e,b);e.setValue=function(a){$(this).find("textarea").val(a).change()};return e};
Inspector.prototype.addInfo=function(c,a,b){b=this.processOptions(b);a=a||"";var f=null;null!=c?f=this.createWidget(c,a,b):(f=document.createElement("div"),b.className&&(f.className=b.className),f.innerHTML="<span class='winfo'>"+a+"</span>");f.setValue=function(a){$(this).find(".winfo").html(a)};b.height&&(c=$(f).find("span.info_content")[0],c.style.height="string"==typeof b.height?b.height:b.height+"px",c.style.overflow="auto");this.append(f,b);return f};
Inspector.prototype.addSlider=function(c,a,b){b=this.processOptions(b);void 0===b.min&&(b.min=0);void 0===b.max&&(b.max=1);void 0===b.step&&(b.step=0.01);var f=this;this.values[c]=a;var e=this.createWidget(c,"<span class='inputfield full'>\t\t\t\t<input tabIndex='"+this.tab_index+"' type='text' class='slider-text fixed nano' value='"+a+"' /><span class='slider-container'></span></span>",b),d=e.querySelector(".slider-container"),g=new LiteGUI.Slider(a,b);d.appendChild(g.root);var h=e.querySelector(".slider-text");
$(h).on("change",function(){var a=parseFloat($(this).val());g.setValue(a);Inspector.onWidgetChange.call(f,e,c,a,b)});$(g.root).on("change",function(a,d){h.value=d;Inspector.onWidgetChange.call(f,e,c,d,b)});this.append(e,b);e.setValue=function(a){g.setValue(a)};return e};
Inspector.prototype.addCheckbox=function(c,a,b){b=this.processOptions(b);a=a||"";var f=this;this.values[c]=a;var e=this.createWidget(c,"<span class='inputfield'><span tabIndex='"+this.tab_index+"' class='fixed flag checkbox "+(a?"on":"off")+"'>"+(a?"on":"off")+"</span></span>",b);this.tab_index++;$(e).find(".wcontent .checkbox").keypress(function(a){32==a.keyCode&&$(this).click()});$(e).click(function(){var a=!this.data;this.data=a;$(e).find("span.flag").html(a?"on":"off");a?$(e).find("span.checkbox").addClass("on"):
$(e).find("span.checkbox").removeClass("on");Inspector.onWidgetChange.call(f,e,c,a,b)})[0].data=a;e.setValue=function(a){f.values[c]!=a&&$(this).find(".checkbox").click()};this.append(e,b);return e};Inspector.prototype.addFlags=function(c,a){var b={},f;for(f in c)b[f]=c[f];if(a)for(f in a)"undefined"==typeof b[f]&&(b[f]=a[f]?!0:!1);for(f in b)this.addCheckbox(f,b[f],{callback:function(a){return function(b){c[a]=b}}(f)})};
Inspector.prototype.addCombo=function(c,a,b){b=this.processOptions(b);var f=this;this.values[c]=a;var e="<select tabIndex='"+this.tab_index+"' "+(b.disabled?"disabled":"")+" class='"+(b.disabled?"disabled":"")+"'>";this.tab_index++;var d=this.createWidget(c,"<span class='inputfield full inputcombo "+(b.disabled?"disabled":"")+"'></span>",b);d.options=b;var g=b.values||[];if(b.values&&(g="function"==typeof g?b.values():b.values))for(var h in g)e+="<option "+(g[h]==a?" selected":"")+">"+(g.length?g[h]:
h)+"</option>";e+="</select>";d.querySelector("span.inputcombo").innerHTML=e;$(d).find(".wcontent select").change(function(a){a=a.target.value;g&&g.constructor!=Array&&(a=g[a]);Inspector.onWidgetChange.call(f,d,c,a,b)});this.append(d,b);return d};
Inspector.prototype.addComboButtons=function(c,a,b){b=this.processOptions(b);a=a||"";var f=this;this.values[c]=a;var e="";if(b.values)for(var d in b.values)e+="<button class='wcombobutton "+(a==b.values[d]?"selected":"")+"' data-name='options.values[i]'>"+b.values[d]+"</button>";var g=this.createWidget(c,e,b);$(g).find(".wcontent button").click(function(a){a=a.target.innerHTML;f.values[c]=a;$(g).find(".selected").removeClass("selected");$(this).addClass("selected");Inspector.onWidgetChange.call(f,
g,c,a,b)});this.append(g,b);return g};
Inspector.prototype.addTags=function(c,a,b){function f(a){if(!g.tags[a]){g.tags[a]=!0;var d=document.createElement("div");d.data=a;d.className="wtag";d.innerHTML=a+"<span class='close'>X</span>";$(d).find(".close").click(function(a){a=$(this).parent()[0].data;delete g.tags[a];$(this).parent().remove();$(g).trigger("wremoved",a);Inspector.onWidgetChange.call(e,g,c,g.tags,b)});$(g).find(".wtagscontainer").append(d);e.values[c]=g.tags;b.callback&&b.callback.call(g,g.tags);$(g).trigger("wchange",g.tags);
$(g).trigger("wadded",a);if(e.onchange)e.onchange(c,g.tags,g)}}b=this.processOptions(b);a=a||[];var e=this;this.values[c]=a;a="<select>";if(b.values)for(var d in b.values)a+="<option>"+b.values[d]+"</option>";var g=this.createWidget(c,"<span class='inputfield full'>"+(a+"</select><div class='wtagscontainer inputfield'></div>")+"</span>",b);g.tags={};for(d in b.value)f(b.value[d]);$(g).find(".wcontent select").change(function(a){f(a.target.value)});this.append(g,b);return g};
Inspector.prototype.addList=function(c,a,b){function f(a){var b=$(h).find("li.selected");b&&b.length&&(40==a.keyCode?(a=b.next())&&a.length&&$(a[0]).click():38==a.keyCode&&(a=b.prev())&&a.length&&$(a[0]).click())}function e(e){b.multiselection?$(this).toggleClass("selected"):($(h).find("li").removeClass("selected"),$(this).addClass("selected"));e=a[this.dataset.pos];Inspector.onWidgetChange.call(d,h,c,e,b);$(h).trigger("wadded",e)}b=this.processOptions(b);var d=this,g="";b.height&&(g="style='height: "+
b.height+"px; overflow: auto;'");g="<ul class='lite-list' "+g+" tabIndex='"+this.tab_index+"'><ul>";this.tab_index++;var h=this.createWidget(c,"<span class='inputfield full "+(b.disabled?"disabled":"")+"'>"+g+"</span>",b);$(h).find("ul").focus(function(){$(document).on("keypress",f)});$(h).find("ul").blur(function(){$(document).off("keypress",f)});h.updateItems=function(b){var c="";if(a=b)for(var d in a){b=a[d];var g="";null==a[d].length&&(b=a[d].name?a[d].name:d,a[d].icon&&(g="<img src='"+a[d].icon+
"' class='icon' />"));c+="<li className='item-"+d+" "+("object"==typeof a[d]&&a[d].selected?"selected":"")+"' data-name='"+b+"' data-pos='"+d+"'>"+g+b+"</li>"}this.querySelector("ul").innerHTML=c;$(this).find(".wcontent li").click(e)};h.removeItem=function(a){for(var b=$(h).find(".wcontent li"),c=0;c<b.length;c++)b[c].dataset.name==a&&$(b[c]).remove()};h.updateItems(a);this.append(h,b);h.getSelected=function(){for(var a=[],b=this.querySelectorAll("ul li.selected"),c=0;c<b.length;++c)a.push(b[c].dataset.name);
return a};h.selectAll=function(){for(var a=this.querySelectorAll("ul li"),b=0;b<a.length;++b){var c=a[b];$(c).hasClass("selected")||$(c).click()}return r};b.height&&$(h).scroll(0);return h};
Inspector.prototype.addButton=function(c,a,b){b=this.processOptions(b);a=a||"";var f=this,e="";null===c&&(e="single");var d=this.createWidget(c,"<button class='"+e+"' tabIndex='"+this.tab_index+"'>"+a+"</button>",b);this.tab_index++;$(d).find("button").click(function(){Inspector.onWidgetChange.call(f,d,c,this.innerHTML,b);$(d).trigger("wclick",a)});this.append(d,b);d.wclick=function(a){b.disabled||$(this).wclick(a)};return d};
Inspector.prototype.addButtons=function(c,a,b){b=this.processOptions(b);a=a||"";var f=this,e="",d="calc("+(100/a.length).toFixed(3)+"% - "+Math.floor(16/a.length)+"px);";if(a&&"object"==typeof a)for(var g in a)e+="<button tabIndex='"+this.tab_index+"' style=' width:"+d+" width: -moz-"+d+" width: -webkit-calc("+(89/a.length).toFixed(3)+"%)'>"+a[g]+"</button>",this.tab_index++;var h=this.createWidget(c,e,b);$(h).find("button").click(function(){Inspector.onWidgetChange.call(f,h,c,this.innerHTML,b);$(h).trigger("wclick",
this.innerHTML)});this.append(h,b);return h};
Inspector.prototype.addColor=function(c,a,b){b=this.processOptions(b);a=a||[0,0,0];var f=this;this.values[c]=a;var e="<input tabIndex='"+this.tab_index+"' id='colorpicker-"+c+"' class='color' value='"+a+"' "+(b.disabled?"disabled":"")+"/>";this.tab_index++;b.show_rgb&&(e+="<span class='rgb-color'>"+Inspector.parseColor(a)+"</span>");var d=this.createWidget(c,e,b);this.append(d,b);var e=$(d).find("input.color")[0],g=new jscolor.color(e);g.pickerFaceColor="#333";g.pickerBorderColor="black";g.pickerInsetColor=
"#222";g.rgb_intensity=1;b.disabled&&(g.pickerOnfocus=!1);"string"!=typeof a&&a.length&&2<a.length&&(g.fromRGB(1*a[0],1*a[1],1*a[2]),g.rgb_intensity=1);$(e).change(function(a){$(d).find(".rgb-color").html(Inspector.parseColor(g.rgb))});g.onImmediateChange=function(){var a=[g.rgb[0]*g.rgb_intensity,g.rgb[1]*g.rgb_intensity,g.rgb[2]*g.rgb_intensity];f.values[c]=a;b.callback&&b.callback.call(d,a.concat(),"#"+g.toString(),g);$(d).trigger("wchange",[a.concat(),g.toString()]);if(f.onchange)f.onchange(c,
a.concat(),d)};b.step=b.step||0.01;b.dragger_class="nano";var h=new LiteGUI.Dragger(1,b);$(d).find(".wcontent").append(h.root);$(h.input).change(function(){var a=parseFloat($(this).val());g.rgb_intensity=a;if(g.onImmediateChange)g.onImmediateChange()});d.setValue=function(a){g.fromRGB(a[0],a[1],a[2]);$(h.input).change()};return d};
Inspector.prototype.addFile=function(c,a,b){b=this.processOptions(b);a=a||"";var f=this;this.values[c]=a;var e=this.createWidget(c,"<span class='inputfield full whidden'><span class='filename'>"+a+"</span><input type='file' size='100' class='file' value='"+a+"'/></span>",b);$(e).find(".wcontent input").change(function(a){b.callback&&b.callback.call(e,a.target.value);$(e).find(".filename").html(a.target.value);$(e).trigger("wchange",[a.target.files]);Inspector.onWidgetChange.call(f,e,c,a.target.value,
b)});this.append(e,b);return e};Inspector.prototype.addLine=function(c,a,b){b=this.processOptions(b);a=a||"";var f=this;this.values[c]=a;var e=this.createWidget(c,"<span class='line-editor'></span>",b);a=new LiteGUI.LineEditor(a,b);$(e).find("span.line-editor").append(a);$(a).change(function(a){b.callback&&b.callback.call(e,a.target.value);$(e).trigger("wchange",[a.target.value]);Inspector.onWidgetChange.call(f,e,c,a.target.value,b)});this.append(e,b);return e};
Inspector.prototype.addTree=function(c,a,b){b=this.processOptions(b);a=a||"";c=this.createWidget(c,"<div class='wtree inputfield full'></div>",b);var f=$(c).find(".wtree")[0];b.height&&(f.style.height="number"==typeof b.height?b.height+"px":b.height);var e=c.tree=new LiteGUI.Tree(null,a,b.tree_options);e.onItemSelected=function(a,c){b.callback&&b.callback(a,c)};f.appendChild(e.root);c.setValue=function(a){e.updateTree(a)};this.append(c,b);return c};
Inspector.prototype.addDataTree=function(c,a,b){function f(a,b){for(var c in b){var e=document.createElement("div");e.className="treenode";"object"==typeof b[c]?(e.innerHTML="<span class='itemname'>"+c+"</span><span class='itemcontent'></span>",f($(e).find(".itemcontent")[0],b[c])):e.innerHTML="<span class='itemname'>"+c+"</span><span class='itemvalue'>"+b[c]+"</span>";a.appendChild(e)}}b=this.processOptions(b);a=a||"";c=this.createWidget(c,"<div class='wtree'></div>",b);var e=$(c).find(".wtree")[0];
f(e,a);this.append(c,b);return c};Inspector.prototype.processOptions=function(c){"function"==typeof c&&(c={callback:c});return c||{}};Inspector.parseColor=function(c){return"<span style='color: #FAA'>"+c[0].toFixed(2)+"</span>,<span style='color: #AFA'>"+c[1].toFixed(2)+"</span>,<span style='color: #AAF'>"+c[2].toFixed(2)+"</span>"};LiteGUI.Inspector=Inspector;
