var LiteGUI={root:null,content:null,panels:{},undo_steps:[],modalbg_div:null,_modules_initialized:!1,mainmenu:null,modules:[],init:function(b){b=b||{};b.width&&b.height&&this.setWindowSize(b.width,b.height);this.container=null;b.container&&(this.container=document.getElementById(b.container));this.container||(this.container=document.body);var a=document.createElement("div");a.className="litegui-wrap fullscreen";a.style.position="relative";a.style.overflow="hidden";this.root=a;this.container.appendChild(a);
a=this.modalbg_div=document.createElement("div");this.modalbg_div.className="litemodalbg";this.root.appendChild(this.modalbg_div);a.style.display="none";a=document.createElement("div");a.className="litegui-maincontent";this.content=a;this.root.appendChild(a);b.menubar&&this.createMenubar();b.gui_callback&&b.gui_callback();!1!=b.initModules&&this.initModules();this.root.classList.contains("fullscreen")&&window.addEventListener("resize",function(c){LiteGUI.maximizeWindow()});document.addEventListener("keydown",
function(c){"input"!=c.target.nodeName.toLowerCase()&&"textarea"!=c.target.nodeName.toLowerCase()&&17!=c.keyCode&&((26==c.keyCode||90==c.keyCode&&(c.ctrlKey||c.metaKey)||122==c.charCode&&c.ctrlKey)&&LiteGUI.doUndo(),27==c.keyCode&&$(LiteGUI).trigger("escape"))})},initModules:function(){for(var b in this.modules)this.modules[b].preInit&&this.modules[b].preInit();for(b in this.modules)this.modules[b].init&&!this.modules[b]._initialized&&(this.modules[b].init(),this.modules[b]._initialized=!0);for(b in this.modules)this.modules[b].postInit&&
this.modules[b].postInit();this._modules_initialized=!0},registerModule:function(b){this.modules.push(b);this._modules_initialized&&(b.preInit&&b.preInit(),b.init&&b.init(),b.postInit&&b.postInit());$(this).trigger("module_registered",b)},add:function(b){this.content.appendChild(b.root||b)},getById:function(b){return document.getElementById(b)},createMenubar:function(){this.menubar=new LiteGUI.Menubar("mainmenubar");this.add(this.menubar)},setWindowSize:function(b,a){if(b&&a)$(this.root).css({width:b+
"px",height:a+"px","box-shadow":"0 0 4px black"}).removeClass("fullscreen");else{if($(this.root).hasClass("fullscreen"))return;$(this.root).addClass("fullscreen");$(this.root).css({width:"100%",height:"100%","box-shadow":"0 0 0"})}$(LiteGUI).trigger("resized")},maximizeWindow:function(){this.setWindowSize()},max_undo_steps:100,min_time_between_undos:500,last_undo_time:0,addUndoStep:function(b){var a=(new Date).getTime();a-this.last_undo_time<this.min_time_between_undos||(this.undo_steps.push(b),this.last_undo_time=
a,this.undo_steps.length>this.max_undo_steps&&this.undo_steps.shift())},doUndo:function(){if(this.undo_steps.length){var b=this.undo_steps.pop();null!=b.callback&&b.callback(b.data);$(LiteGUI).trigger("undo",b)}},removeUndoSteps:function(){this.undo_steps=[]},toClipboard:function(b){null!=b&&localStorage.setItem("lite_clipboard",JSON.stringify(b))},getClipboard:function(){var b=localStorage.getItem("lite_clipboard");return b?JSON.parse(b):null},addCSS:function(b){var a=document.createElement("style");
a.type="text/css";a.innerHTML=b;document.getElementsByTagName("head")[0].appendChild(a)},requireCSS:function(b,a){for("string"==typeof b&&(b=[b]);b.length;){var c=document.createElement("link");c.rel="stylesheet";c.type="text/css";c.href=b.shift(1);c.media="all";document.getElementsByTagName("head")[0].appendChild(c);0==b.length&&(c.onload=a)}},request:function(b){var a=b.dataType||"text";"json"==a?a="text":"xml"==a?a="text":"binary"==a&&(a="arraybuffer",b.mimeType="application/octet-stream");var c=
new XMLHttpRequest;c.open(b.data?"POST":"GET",b.url,!0);a&&(c.responseType=a);b.mimeType&&c.overrideMimeType(b.mimeType);c.onload=function(a){a=this.response;if(200!=this.status)a="Error "+this.status,b.error&&b.error(a),LEvent.trigger(c,"fail",this.status);else{if("json"==b.dataType)try{a=JSON.parse(a)}catch(d){if(b.error)b.error(d);else throw d;}else if("xml"==b.dataType)try{a=(new DOMParser).parseFromString(a,"text/xml")}catch(e){if(b.error)b.error(e);else throw e;}b.success&&b.success.call(this,
a)}};c.onerror=function(c){b.error&&b.error(c)};c.send(b.data);return c},requireScript:function(b,a,c){"string"==typeof b&&(b=[b]);var g=b.length,d=g,e;for(e in b){var f=document.createElement("script");f.type="text/javascript";f.src=b[e];f.async=!1;f.onload=function(b){g--;g?c&&c(this.src,d-g-1):a&&a()};document.getElementsByTagName("head")[0].appendChild(f)}},requireScriptSerial:function(b,a,c){function g(){var d=document.createElement("script");d.type="text/javascript";d.src=b.shift(1);d.onload=
function(d){b.length?(c&&c(b[0],b.length),g()):a&&a()};document.getElementsByTagName("head")[0].appendChild(d)}"string"==typeof b&&(b=[b]);g()},newDiv:function(b,a){var c=document.createElement("div");c.id=b;c.root=c;void 0!==a&&(c.innerHTML=a);c.add=function(c){this.appendChild(c.root||c)};return c},showModalBackground:function(b){LiteGUI.modalbg_div.style.display=b?"block":"none"},showMessage:function(b,a){a=a||{};a.title=a.title||"Attention";a.content=b;a.close="fade";var c=new LiteGUI.Dialog("info_message",
a);a.noclose||c.addButton("Close",{close:!0});c.makeModal("fade");return c},popup:function(b,a){a=a||{};a.min_height=140;"string"==typeof b&&(b="<p>"+b+"</p>");a.content=b;a.close="fade";var c=new LiteGUI.Dialog("info_message",a);a.noclose||c.addButton("Close",{close:!0});c.show();return c},alert:function(b,a){a=a||{};a.className="alert";a.title="Alert";a.width=280;a.height=140;"string"==typeof b&&(b="<p>"+b+"</p>");$(".litepanel.alert").remove();return this.showMessage(b,a)},confirm:function(b,a,
c,g){a=a||{};"function"==typeof a&&(g=c,c=a,a={});a.className="alert";a.title="Confirm";a.width=280;"string"==typeof b&&(b="<p>"+b+"</p>");a.noclose=!0;var d=this.showMessage(b+"<button class='yes-button' style='width:45%; margin-left: 10px'>Yes</button><button class='no-button' style='width:45%'>No</button>",a);d.content.style.paddingBottom="10px";$(d.content).find(".yes-button").click(function(){c&&c();d.close()});$(d.content).find(".no-button").click(function(){g&&g();d.close()});return d},prompt:function(b,
a,c,g){a=a||{};"function"==typeof a&&(g=c,c=a,a={});a.className="alert";a.title="Prompt";a.width=280;"string"==typeof b&&(b="<p>"+b+"</p>");var d=a.value||"",e="<input type='text' value='"+d+"'/>";a.textarea&&(e="<textarea class='textfield' style='width:95%'>"+d+"</textarea>");a.noclose=!0;var f=this.showMessage(b+("<p>"+e+"</p><button class='yes-button' style='width:45%; margin-left: 10px; margin-bottom: 10px'>Accept</button><button class='no-button' style='width:45%'>Cancel</button>"),a);$(f.content).find(".yes-button").click(function(){var g=
$(f.content).find(a.textarea?"textarea":"input").val();c&&c(g);f.close()});$(f.content).find(".no-button").click(function(){g&&g();f.close()});return f},getUrlVars:function(){for(var b=[],a,c=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),g=0;g<c.length;g++)a=c[g].split("="),b.push(a[0]),b[a[0]]=a[1];return b},getUrlVar:function(b){return LiteGUI.getUrlVars()[b]},trigger:function(b,a){var c=document.createEvent("CustomEvent");c.initCustomEvent(b,!0,!0,!0);if(a.dispatchEvent)a.dispatchEvent(c);
else throw"trigger can only be called in DOMElements";},draggable:function(b,a){function c(a){if("mousedown"==a.type)return e||(f=(e=b.getClientRects()[0])?e.left:0,h=e?e.top:0),g=a.clientX,d=a.clientY,document.addEventListener("mousemove",c),document.addEventListener("mouseup",c),a.stopPropagation(),a.preventDefault(),!1;if("mouseup"==a.type)document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",c);else if("mousemove"==a.type){var m=a.clientX-g,p=a.clientY-d;g=a.clientX;
d=a.clientY;f+=m;h+=p;b.style.left=f+"px";b.style.top=h+"px"}}a=a||b;a.addEventListener("mousedown",c);a.style.cursor="move";var g=0,d=0,e=b.getClientRects()[0],f=e?e.left:0,h=e?e.top:0;b.style.position="absolute";b.style.left=f+"px";b.style.top=h+"px"}};function purgeElement(b,a){var c=b.attributes,g,d;if(c)for(g=c.length-1;0<=g;g-=1)d=c[g].name,"function"===typeof b[d]&&(b[d]=null);if(c=b.childNodes)for(c=c.length,g=0;g<c;g+=1)purgeElement(b.childNodes[g])}
"undefined"==typeof escapeHtmlEntities&&(escapeHtmlEntities=function(b){return b.replace(/[\u00A0-\u2666<>\&]/g,function(a){return"&"+(escapeHtmlEntities.entityTable[a.charCodeAt(0)]||"#"+a.charCodeAt(0))+";"})},escapeHtmlEntities.entityTable={34:"quot",38:"amp",39:"apos",60:"lt",62:"gt",160:"nbsp",161:"iexcl",162:"cent",163:"pound",164:"curren",165:"yen",166:"brvbar",167:"sect",168:"uml",169:"copy",170:"ordf",171:"laquo",172:"not",173:"shy",174:"reg",175:"macr",176:"deg",177:"plusmn",178:"sup2",
179:"sup3",180:"acute",181:"micro",182:"para",183:"middot",184:"cedil",185:"sup1",186:"ordm",187:"raquo",188:"frac14",189:"frac12",190:"frac34",191:"iquest",192:"Agrave",193:"Aacute",194:"Acirc",195:"Atilde",196:"Auml",197:"Aring",198:"AElig",199:"Ccedil",200:"Egrave",201:"Eacute",202:"Ecirc",203:"Euml",204:"Igrave",205:"Iacute",206:"Icirc",207:"Iuml",208:"ETH",209:"Ntilde",210:"Ograve",211:"Oacute",212:"Ocirc",213:"Otilde",214:"Ouml",215:"times",216:"Oslash",217:"Ugrave",218:"Uacute",219:"Ucirc",
220:"Uuml",221:"Yacute",222:"THORN",223:"szlig",224:"agrave",225:"aacute",226:"acirc",227:"atilde",228:"auml",229:"aring",230:"aelig",231:"ccedil",232:"egrave",233:"eacute",234:"ecirc",235:"euml",236:"igrave",237:"iacute",238:"icirc",239:"iuml",240:"eth",241:"ntilde",242:"ograve",243:"oacute",244:"ocirc",245:"otilde",246:"ouml",247:"divide",248:"oslash",249:"ugrave",250:"uacute",251:"ucirc",252:"uuml",253:"yacute",254:"thorn",255:"yuml",402:"fnof",913:"Alpha",914:"Beta",915:"Gamma",916:"Delta",917:"Epsilon",
918:"Zeta",919:"Eta",920:"Theta",921:"Iota",922:"Kappa",923:"Lambda",924:"Mu",925:"Nu",926:"Xi",927:"Omicron",928:"Pi",929:"Rho",931:"Sigma",932:"Tau",933:"Upsilon",934:"Phi",935:"Chi",936:"Psi",937:"Omega",945:"alpha",946:"beta",947:"gamma",948:"delta",949:"epsilon",950:"zeta",951:"eta",952:"theta",953:"iota",954:"kappa",955:"lambda",956:"mu",957:"nu",958:"xi",959:"omicron",960:"pi",961:"rho",962:"sigmaf",963:"sigma",964:"tau",965:"upsilon",966:"phi",967:"chi",968:"psi",969:"omega",977:"thetasym",
978:"upsih",982:"piv",8226:"bull",8230:"hellip",8242:"prime",8243:"Prime",8254:"oline",8260:"frasl",8472:"weierp",8465:"image",8476:"real",8482:"trade",8501:"alefsym",8592:"larr",8593:"uarr",8594:"rarr",8595:"darr",8596:"harr",8629:"crarr",8656:"lArr",8657:"uArr",8658:"rArr",8659:"dArr",8660:"hArr",8704:"forall",8706:"part",8707:"exist",8709:"empty",8711:"nabla",8712:"isin",8713:"notin",8715:"ni",8719:"prod",8721:"sum",8722:"minus",8727:"lowast",8730:"radic",8733:"prop",8734:"infin",8736:"ang",8743:"and",
8744:"or",8745:"cap",8746:"cup",8747:"int",8756:"there4",8764:"sim",8773:"cong",8776:"asymp",8800:"ne",8801:"equiv",8804:"le",8805:"ge",8834:"sub",8835:"sup",8836:"nsub",8838:"sube",8839:"supe",8853:"oplus",8855:"otimes",8869:"perp",8901:"sdot",8968:"lceil",8969:"rceil",8970:"lfloor",8971:"rfloor",9001:"lang",9002:"rang",9674:"loz",9824:"spades",9827:"clubs",9829:"hearts",9830:"diams",338:"OElig",339:"oelig",352:"Scaron",353:"scaron",376:"Yuml",710:"circ",732:"tilde",8194:"ensp",8195:"emsp",8201:"thinsp",
8204:"zwnj",8205:"zwj",8206:"lrm",8207:"rlm",8211:"ndash",8212:"mdash",8216:"lsquo",8217:"rsquo",8218:"sbquo",8220:"ldquo",8221:"rdquo",8222:"bdquo",8224:"dagger",8225:"Dagger",8240:"permil",8249:"lsaquo",8250:"rsaquo",8364:"euro"});
function beautifyCode(b,a){a=a||"abstract else instanceof super boolean enum int switch break export interface synchronized byte extends let this case false long throw catch final native throws char finally new transient class float null true const for package try continue function private typeof debugger goto protected var default if public void delete implements return volatile do import short while double in static with".split(" ");b=b.replace(/(\w+)/g,function(c){return-1!=a.indexOf(c)?"<span class='rsv'>"+
c+"</span>":c});b=b.replace(/([0-9]+)/g,function(c){return"<span class='num'>"+c+"</span>"});b=b.replace(/(\w+\.\w+)/g,function(c){c=c.split(".");return"<span class='obj'>"+c[0]+"</span>.<span class='prop'>"+c[1]+"</span>"});b=b.replace(/(\w+)\(/g,function(c){return"<span class='prop'>"+c.substr(0,c.length-1)+"</span>("});b=b.replace(/(\"(\\.|[^\"])*\")/g,function(c){return"<span class='str'>"+c+"</span>"});return b=b.replace(/(\/\/[a-zA-Z0-9\?\!\(\)_ ]*)/g,function(c){return"<span class='cmnt'>"+
c+"</span>"})}
(function(){function b(c,a){a=a||{};var b=document.createElement("div");b.className="litegui searchbox";b.innerHTML="<input value='"+c+"' placeholder='"+(null!=a.placeholder?a.placeholder:"Search")+"'/>";this.input=b.querySelector("input");this.root=b;var e=this;$(this.input).change(function(c){c=c.target.value;a.callback&&a.callback.call(e,c)})}function a(c,a){a=a||{};var b=document.createElement("div");b.className="litearea";c&&(b.id=c);this.root=b;this.root.litearea=this;b.style.width=a.width||
"100%";b.style.height=a.height||"100%";this.options=a;var e=this;window.addEventListener("resize",function(c){e.resize(c)});this._computed_size=[$(this.root).width(),$(this.root).height()];b=document.createElement("div");a.content_id&&(b.id=a.content_id);b.className="liteareacontent";b.style.width="100%";b.style.height="100%";this.root.appendChild(b);this.content=b;this.split_direction="none";this.sections=[];a.autoresize&&$(LiteGUI).bind("resized",function(){e.resize()})}LiteGUI.Button=function(c,
a){a=a||{};"function"===typeof a&&(a={callback:a});var b=this,e=document.createElement("div");e.className="litegui button";this.root=e;var f=document.createElement("button");this.content=f;e.appendChild(f);f.innerHTML=c;f.addEventListener("click",function(c){b.click()});this.click=function(){a.callback&&a.callback.call(b)}};b.prototype.setValue=function(c){$(this.input).val(c).change()};b.prototype.getValue=function(){return $(this.input).val()};LiteGUI.SearchBox=b;a.prototype.getSection=function(c){c=
c||0;return this.sections.length>c?this.sections[c]:null};a.prototype.resize=function(c){var a=[$(this.root).width(),$(this.root).height()];c&&this._computed_size&&a[0]==this._computed_size[0]&&a[1]==this._computed_size[1]||this.sendResizeEvent(c)};a.prototype.adjustHeight=function(){if(this.root.parentNode){var c=this.root.getClientRects()[0].top;this.root.style.height="calc( 100% - "+c+"px )"}else console.error("Cannot adjust height of LiteGUI.Area without parent")};a.prototype.sendResizeEvent=
function(c){if(this.sections.length)for(var a in this.sections)this.sections[a].resize(c);else for(c=0;c<this.root.childNodes.length;c++)a=this.root.childNodes[c],a.litearea?a.litearea.resize():$(a).trigger("resize");if(this.onresize)this.onresize()};a.prototype.split=function(c,a,b){function e(c){document.addEventListener("mousemove",f);document.addEventListener("mouseup",h);t[0]=c.pageX;t[1]=c.pageY;c.stopPropagation();c.preventDefault()}function f(a){"horizontal"==c?t[0]!=a.pageX&&q.moveSplit(t[0]-
a.pageX):"vertical"==c&&t[1]!=a.pageY&&q.moveSplit(a.pageY-t[1]);t[0]=a.pageX;t[1]=a.pageY;a.stopPropagation();a.preventDefault();q.options.inmediateResize&&q.resize()}function h(c){document.removeEventListener("mousemove",f);document.removeEventListener("mouseup",h);q.resize()}c=c||"vertical";if(this.sections.length)throw"cannot split twice";var l=new LiteGUI.Area(null,{content_id:this.content.id});l.root.style.display="inline-block";var m=new LiteGUI.Area;m.root.style.display="inline-block";var p=
"",k=null,n=null;b&&(p=" - 5px",k=document.createElement("div"),k.className="litesplitbar "+c,this.splitbar=k,k.addEventListener("mousedown",e));a=a||["50%",null];"vertical"==c?(l.root.style.width="100%",m.root.style.width="100%",null==a[0]?(n=a[1],"number"==typeof n&&(n=a[1]+"px"),l.root.style.height="-moz-calc( 100% - "+n+p+" )",l.root.style.height="-webkit-calc( 100% - "+n+p+" )",l.root.style.height="calc( 100% - "+n+p+" )",m.root.style.height=n,m.size=n,n=l):null==a[1]?(n=a[0],"number"==typeof n&&
(n=a[0]+"px"),l.root.style.height=n,l.size=n,m.root.style.height="-moz-calc( 100% - "+n+p+" )",m.root.style.height="-webkit-calc( 100% - "+n+p+" )",m.root.style.height="calc( 100% - "+n+p+" )",n=m):(p=a[0],"number"==typeof p&&(p=a[0]+"px"),b=a[1],"number"==typeof b&&(b=a[1]+"px"),l.root.style.height=p,l.size=p,m.root.style.height=b,m.size=b)):(l.root.style.height="100%",m.root.style.height="100%",null==a[0]?(n=a[1],"number"==typeof n&&(n=a[1]+"px"),l.root.style.width="-moz-calc( 100% - "+n+p+" )",
l.root.style.width="-webkit-calc( 100% - "+n+p+" )",l.root.style.width="calc( 100% - "+n+p+" )",m.root.style.width=n,m.size=a[1],n=l):null==a[1]?(n=a[0],"number"==typeof n&&(n=a[0]+"px"),l.root.style.width=n,l.size=n,m.root.style.width="-moz-calc( 100% - "+n+p+" )",m.root.style.width="-webkit-calc( 100% - "+n+p+" )",m.root.style.width="calc( 100% - "+n+p+" )",n=m):(p=a[0],"number"==typeof p&&(p=a[0]+"px"),b=a[1],"number"==typeof b&&(b=a[1]+"px"),l.root.style.width=p,l.size=p,m.root.style.width=b,
m.size=b));l.root.removeChild(l.content);l.root.appendChild(this.content);l.content=this.content;this.root.appendChild(l.root);k&&this.root.appendChild(k);this.root.appendChild(m.root);this.sections=[l,m];this.dynamic_section=n;this.direction=c;var q=this,t=[0,0]};a.prototype.hide=function(){this.root.style.display="none"};a.prototype.show=function(){this.root.style.display="block"};a.prototype.showSection=function(c){var a=this.sections[c],b=0,b="horizontal"==this.direction?a.root.style.width:a.root.style.height,
e;for(e in this.sections)a=this.sections[e],e==c?a.root.style.display="inline-block":"horizontal"==this.direction?a.root.style.width="calc( 100% - "+b+" - 5px)":a.root.style.height="calc( 100% - "+b+" - 5px)";this.splitbar&&(this.splitbar.style.display="inline-block");this.sendResizeEvent()};a.prototype.hideSection=function(c){for(var a in this.sections){var b=this.sections[a];a==c?b.root.style.display="none":"horizontal"==this.direction?b.root.style.width="100%":b.root.style.height="100%"}this.splitbar&&
(this.splitbar.style.display="none");this.sendResizeEvent()};a.prototype.moveSplit=function(c){if(this.sections){var a=this.sections[0],b=this.sections[1];"horizontal"==this.direction?this.dynamic_section==a?(c=$(b.root).width()+c+"px",a.root.style.width="-moz-calc( 100% - "+c+" - 2px )",a.root.style.width="-webkit-calc( 100% - "+c+" - 2px )",a.root.style.width="calc( 100% - "+c+" - 2px )",b.root.style.width=c):(c=$(a.root).width()-c+"px",a.root.style.width=c,b.root.style.width="-moz-calc( 100% - "+
c+" - 2px )",b.root.style.width="-webkit-calc( 100% - "+c+" - 2px )",b.root.style.width="calc( 100% - "+c+" - 2px )"):"vertical"==this.direction&&(this.dynamic_section==a?(c=$(b.root).height()+c+"px",a.root.style.height="-moz-calc( 100% - "+c+" - 2px )",a.root.style.height="-webkit-calc( 100% - "+c+" - 2px )",a.root.style.height="calc( 100% - "+c+" - 2px )",b.root.style.height=c):(c=$(a.root).height()+c+"px",a.root.style.height=c,b.root.style.height="-moz-calc( 100% - "+c+" - 2px )",b.root.style.height=
"-webkit-calc( 100% - "+c+" - 2px )",b.root.style.height="calc( 100% - "+c+" - 2px )"))}};a.prototype.setAreaSize=function(c,a){var b=this.sections[1];b.root.style.width="-moz-calc( 100% - "+a+" - 2px )";b.root.style.width="-webkit-calc( 100% - "+a+" - 2px )";b.root.style.width="calc( 100% - "+a+" - 2px )"};a.prototype.merge=function(a){if(0==this.sections.length)throw"not splitted";a=this.sections[a||0];this.root.appendChild(a.content);this.content=a.content;this.root.removeChild(this.sections[0].root);
this.root.removeChild(this.sections[1].root);this.sections=[];this._computed_size=null;this.resize()};a.prototype.add=function(a){this.content.appendChild(a.root||a)};LiteGUI.Area=a;LiteGUI.Split=function(a,b,d){d=d||{};var e=document.createElement("div");this.root=e;e.id=a;e.className="litesplit "+(d.vertical?"vsplit":"hsplit");this.sections=[];for(var f in b)a=document.createElement("div"),a.className="split-section split"+f,"number"==typeof b[f]?d.vertical?a.style.height=b[f].toFixed(1)+"%":a.style.width=
b[f].toFixed(1)+"%":"string"==typeof b[f]?d.vertical?a.style.height=b[f]:a.style.width=b[f]:(b[f].id&&(a.id=b[f].id),d.vertical?a.style.height="Number"==typeof b[f].height?b[f].height.toFixed(1)+"%":b[f].height:a.style.width="Number"==typeof b[f].width?b[f].width.toFixed(1)+"%":b[f].width),this.sections.push(a),e.appendChild(a);d.parent&&(d.parent.root?d.parent.root.appendChild(e):d.parent.appendChild(e))};LiteGUI.ContextualMenu=function(a,b){this.options=b=b||{};var d=this,e=document.createElement("div");
e.className="litecontextualmenu litemenubar-panel";e.style.minWidth=100;e.style.minHeight=100;this.root=e;for(var f in a){var h=document.createElement("div");h.className="litemenu-entry submenu";h.dataset.value=a[f];h.innerHTML=a.constructor==Array?a[f]:f;e.appendChild(h)}$(e).find(".litemenu-entry").click(function(a){a=this.dataset.value;b.callback&&b.callback.call(d,a);document.body.removeChild(e)});$(e).mouseleave(function(a){document.body.removeChild(e)});document.body.appendChild(e);f=b.left||
0;h=b.top||0;if(b.event){f=b.event.pageX-10;var h=b.event.pageY-10,l=document.body.getClientRects()[0];f>l.width-$(e).width()-10&&(f=l.width-$(e).width()-10);h>l.height-$(e).height()-10&&(h=l.height-$(e).height()-10)}e.style.left=f+"px";e.style.top=h+"px"};LiteGUI.createLitebox=function(a,b){var d=document.createElement("span");d.className="listbox listopen";d.innerHTML="";d.dataset.value=a?"open":"closed";d.addEventListener("click",function(a){console.log("CLICK");a.target.setValue("open"==this.dataset.value?
!1:!0)});d.on_change_callback=b;d.setEmpty=function(a){a?$(this).addClass("empty"):$(this).removeClass("empty")};d.setValue=function(a){this.dataset.value!=(a?"open":"closed")&&(a?(this.dataset.value="open",$(this).addClass("listopen"),$(this).removeClass("listclosed")):(this.dataset.value="closed",$(this).removeClass("listopen"),$(this).addClass("listclosed")),b&&b(this.dataset.value))};return d};LiteGUI.List=function(a,b,d){d=d||{};var e=document.createElement("ul");this.root=e;e.id=a;e.className=
"litelist";this.items=[];var f=this;this.callback=d.callback;for(var h in b){a=document.createElement("li");a.className="list-item";a.data=b[h];var l="";"string"==typeof b[h]?l=b[h]+"<span class='arrow'></span>":(l=(b[h].name||b[h].title||"")+"<span class='arrow'></span>",b[h].id&&(a.id=b[h].id));a.innerHTML=l;e.appendChild(a)}$(e).find(".list-item").click(function(){$(e).find(".list-item.selected").removeClass("selected");$(this).addClass("selected");$(f.root).trigger("wchanged",this);f.callback&&
f.callback(this.data)});d.parent&&(d.parent.root?$(d.parent.root).append(e):$(d.parent).append(e))};LiteGUI.Slider=function(a,b){function d(a){var c=b.min||0;l.setValue(a/h.width*((b.max||1)-c)+c)}function e(a){var c=h.getClientRects()[0];d((void 0===a.x?a.pageX:a.x)-c.left);a.preventDefault();return!1}function f(a){document.removeEventListener("mousemove",e);document.removeEventListener("mouseup",f);a.preventDefault();return!1}b=b||{};var h=document.createElement("canvas");h.className="slider "+
(b.extraclass?b.extraclass:"");h.width=100;h.height=10;h.style.position="relative";this.root=h;var l=this;this.value=a;this.setValue=function(a){var c=h.getContext("2d"),d=b.min||0,e=b.max||1;a<d?a=d:a>e&&(a=e);d=(a-d)/(e-d);c.clearRect(0,0,h.width,h.height);c.fillStyle="#999";c.fillRect(0,0,h.width*d,h.height);c.fillStyle="#DA2";c.fillRect(h.width*d-1,0,2,h.height);a!=this.value&&(this.value=a,$(this.root).trigger("change",a))};h.addEventListener("mousedown",function(a){var c;a.offsetX?c=a.offsetX:
a.layerX&&(c=a.layerX);d(c);document.addEventListener("mousemove",e);document.addEventListener("mouseup",f)});this.setValue(a)};LiteGUI.LineEditor=function(a,b){function d(a){return[n.width*((k.xrange[1]-k.xrange[0])*a[0]+k.xrange[0]),n.height*((k.yrange[1]-k.yrange[0])*a[1]+k.yrange[0])]}function e(a){return[(a[0]/n.width-k.xrange[0])/(k.xrange[1]-k.xrange[0]),(a[1]/n.height-k.yrange[0])/(k.yrange[1]-k.yrange[0])]}function f(a){var c=n.getBoundingClientRect(),b=a.clientX-c.left,g=a.clientY-c.top;
0>b?b=0:b>n.width&&(b=n.width);0>g?g=0:g>n.height&&(g=n.height);if(-1!=q&&m([a.clientX-c.left,a.clientY-c.top],[b,g])>0.5*n.height)k.value.splice(q,1),h(a);else{c=e([-(t[0]-b),t[1]-g]);if(-1!=q){var d=k.xrange[0],f=k.xrange[1];k.no_trespassing&&(0<q&&(d=k.value[q-1][0]),q<k.value.length-1&&(f=k.value[q+1][0]));var s=k.value[q];s[0]+=c[0];s[1]+=c[1];s[0]<d?s[0]=d:s[0]>f&&(s[0]=f);s[1]<k.yrange[0]?s[1]=k.yrange[0]:s[1]>k.yrange[1]&&(s[1]=k.yrange[1])}p();k.redraw();t[0]=b;t[1]=g;l();a.preventDefault();
a.stopPropagation()}}function h(a){q=-1;k.redraw();$(document).unbind("mousemove",f);$(document).unbind("mouseup",h);l();a.preventDefault();a.stopPropagation()}function l(){b.callback?b.callback.call(k,k.value):$(k).change()}function m(a,c){return Math.sqrt(Math.pow(c[0]-a[0],2)+Math.pow(c[1]-a[1],2))}function p(){var a=null;-1!=q&&(a=k.value[q]);k.value.sort(function(a,c){return a[0]>c[0]});a&&(q=k.value.indexOf(a))}b=b||{};var k=document.createElement("div");k.className="curve "+(b.extraclass?b.extraclass:
"");k.style.minHeight="50px";k.style.width=b.width||"100%";k.bgcolor=b.bgcolor||"#222";k.pointscolor=b.pointscolor||"#5AF";k.linecolor=b.linecolor||"#444";k.value=a||[];k.xrange=b.xrange||[0,1];k.yrange=b.yrange||[0,1];k.defaulty=null!=b.defaulty?b.defaulty:0.5;k.no_trespassing=b.no_trespassing||!1;k.show_samples=b.show_samples||0;k.options=b;var n=document.createElement("canvas");n.width=b.width||200;n.height=b.height||50;k.appendChild(n);k.canvas=n;$(n).bind("mousedown",function(a){$(document).bind("mousemove",
f);$(document).bind("mouseup",h);for(var c=n.getBoundingClientRect(),b=a.clientX-c.left,c=a.clientY-c.top,g=n.height-c,l=1E5,v=-1,s=0;s<k.value.length;s++){var u=d(k.value[s]),u=m([b,g],u);u<l&&8>u&&(l=u,v=s)}q=v;-1==q&&(g=e([b,n.height-c]),k.value.push(g),p(),q=k.value.indexOf(g));t=[b,c];k.redraw();a.preventDefault();a.stopPropagation()});$(k).resize(function(a){n.width=$(this).width();n.height=$(this).height();k.redraw()});k.getValueAt=function(a){if(a<k.xrange[0]||a>k.xrange[1])return k.defaulty;
for(var c=[k.xrange[0],k.defaulty],b=0,b=0;b<k.value.length;b+=1){var g=k.value[b];if(a==g[0])return g[1];if(a<g[0])return b=(a-c[0])/(g[0]-c[0]),c[1]*(1-b)+g[1]*b;c=g}g=[k.xrange[1],k.defaulty];b=(a-c[0])/(g[0]-c[0]);return c[1]*(1-b)+g[1]*b};k.resample=function(a){var c=[];a=(k.xrange[1]-k.xrange[0])/a;for(var b=k.xrange[0];b<=k.xrange[1];b+=a)c.push(k.getValueAt(b));return c};k.addValue=function(a){for(var c=0;c<k.value;c++)if(!(k.value[c][0]<a[0])){k.value.splice(c,0,a);redraw();return}k.value.push(a);
redraw()};var q=-1;k.redraw=function(){var a=n.getContext("2d");a.setTransform(1,0,0,1,0,0);a.translate(0,n.height);a.scale(1,-1);a.fillStyle=k.bgcolor;a.fillRect(0,0,n.width,n.height);a.strokeStyle=k.linecolor;a.beginPath();var c=d([k.xrange[0],k.defaulty]);a.moveTo(c[0],c[1]);for(var b in k.value)c=k.value[b],c=d(c),a.lineTo(c[0],c[1]);c=d([k.xrange[1],k.defaulty]);a.lineTo(c[0],c[1]);a.stroke();for(b=0;b<k.value.length;b+=1)c=k.value[b],c=d(c),a.fillStyle=q==b?"white":k.pointscolor,a.beginPath(),
a.arc(c[0],c[1],q==b?4:2,0,2*Math.PI),a.fill();if(k.show_samples){var g=k.resample(k.show_samples);a.fillStyle="#888";for(b=0;b<g.length;b+=1)c=[(k.xrange[1]-k.xrange[0])/k.show_samples*b+k.xrange[0],g[b]],c=d(c),a.beginPath(),a.arc(c[0],c[1],2,0,2*Math.PI),a.fill()}};var t=[0,0];k.redraw();return k}})();
(function(){function b(a){this.menu=[];this.panels=[];this.root=document.createElement("div");this.root.id=a;this.root.className="litemenubar";this.content=document.createElement("ul");this.root.appendChild(this.content);this.is_open=!1}b.closing_time=500;b.prototype.clear=function(){$(this.content).empty();this.menu=[];this.panels=[]};b.prototype.attachToPanel=function(a){$(a.content).prepend(this.root)};b.prototype.add=function(a,c){c=c||{};for(var b=this.menu.length,d=a.split("/"),e=0,f=0,h=this.menu;h;){if(5<
e)throw"Error: Menubar too deep";if(h.length==f){f={children:[]};e==d.length-1&&(f.data=c);f.disable=function(){this.data&&(this.data.disabled=!0)};f.enable=function(){this.data&&delete this.data.disabled};f.name=d[e];h.push(f);e++;if(e==d.length)break;f.children=[];h=f.children;f=0}else{if(h[f]&&d[e]==h[f].name)if(e<d.length-1){h=h[f].children;f=0;e++;continue}else{console.warn("Warning: Adding menu that already exists: "+a);break}f++}}b!=this.menu.length&&this.updateMenu()};b.prototype.separator=
function(a,c){var b=this.findMenu(a);b&&b.push({separator:!0,order:c||10})};b.prototype.findMenu=function(a){a=a.split("/");for(var c=0,b=0,d=this.menu;d;){if(c==a.length)return d;if(d.length<=b)break;if("*"==a[c])return d[b].children;if(a[c]==d[b].name)if(c<a.length){d=d[b].children;b=0;c++;continue}else return d[b];b++}return null};b.prototype.updateMenu=function(){var a=this;$(this.content).empty();for(var c in this.menu){var b=document.createElement("li");b.innerHTML="<span class='icon'></span><span class='name'>"+
this.menu[c].name+"</span>";this.content.appendChild(b);b.data=this.menu[c];this.menu[c].element=b;$(b).bind("click",function(c){var b=this.data;b.data&&b.data.callback&&"function"==typeof b.data.callback&&b.data.callback(b.data);a.is_open?(a.is_open=!1,a.hidePanels()):(a.is_open=!0,a.showMenu(b,c,this))});$(b).bind("mouseover",function(c){a.hidePanels();a.is_open&&a.showMenu(this.data,c,this)})}};b.prototype.hidePanels=function(){if(this.panels.length){for(var a in this.panels)$(this.panels[a]).remove();
this.panels=[]}};b.prototype.showMenu=function(a,c,b,d){d||this.hidePanels();if(a.children&&a.children.length){var e=this;e.closing_by_leave&&clearInterval(e.closing_by_leave);var f=document.createElement("div");f.className="litemenubar-panel";var h=[],l;for(l in a.children)h.push(a.children[l]);h.sort(function(a,c){var b=10,g=10;a&&a.data&&null!=a.data.order&&(b=a.data.order);a&&a.separator&&null!=a.order&&(b=a.order);c&&c.data&&null!=c.data.order&&(g=c.data.order);c&&c.separator&&null!=c.order&&
(g=c.order);return b-g});for(l in h){a=document.createElement("p");var m=h[l];a.className="litemenu-entry "+(a.children?" submenu":"");a.innerHTML=m&&m.name?"<span class='icon'></span><span class='name'>"+m.name+(m.children&&m.children.length?"<span class='more'>+</span>":"")+"</span>":"<span class='separator'></span>";a.data=m;if(a.data.data){m=a.data.data;if("checkbox"==m.type&&m.instance&&m.property&&!0==m.instance[m.property]||!0==m.checkbox||m.instance&&m.property&&m.hasOwnProperty("value")&&
m.instance[m.property]==m.value||"function"==typeof m.isChecked&&m.isChecked.call(m.instance,m))a.className+=" checked";m.disabled&&(a.className+=" disabled")}$(a).bind("click",function(){var a=this.data;if(a.data){if(a.data.disabled)return;a.data.instance&&a.data.property&&("checkbox"==a.data.type?(a.data.instance[a.data.property]=!a.data.instance[a.data.property],a.data.instance[a.data.property]?$(this).addClass("checked"):$(this).removeClass("checked")):a.data.hasOwnProperty("value")&&(a.data.instance[a.data.property]=
a.data.value));null!=a.data.checkbox&&(a.data.checkbox=!a.data.checkbox,a.data.checkbox?$(this).addClass("checked"):$(this).removeClass("checked"));a.data.callback&&"function"==typeof a.data.callback&&a.data.callback(a.data)}a.children&&a.children.length?e.showMenu(a,c,this,!0):(e.is_open=!1,e.hidePanels())});$(f).append(a)}$(f).bind("mouseleave",function(a){e.closing_by_leave&&clearInterval(e.closing_by_leave);e.closing_by_leave=setTimeout(function(){e.is_open=!1;e.hidePanels()},LiteGUI.Menubar.closing_time)});
$(f).bind("mouseenter",function(a){e.closing_by_leave&&clearInterval(e.closing_by_leave);e.closing_by_leave=null});b=$(b);f.style.left=b.offset().left+(d?200:0)+"px";f.style.top=b.offset().top+b.height()+(d?-20:2)+"px";this.panels.push(f);$(document.body).append(f);$(f).hide().show()}};LiteGUI.Menubar=b})();
(function(){function b(a,c){c=c||{};var b=document.createElement("DIV");a&&(b.id=a);b.data=this;b.className="litetabs";this.root=b;this.current_tab=null;c.height&&(this.root.style.height="full"==c.height?"100%":c.height);b=document.createElement("UL");b.className="wtabcontainer";this.list=b;this.root.appendChild(this.list);this.tabs={};this.contents={};this.selected=null;this.onchange=c.callback;c.parent&&this.appendTo(c.parent)}b.tabs_height="30px";b.prototype.show=function(){this.root.style.display=
"block"};b.prototype.hide=function(){this.root.style.display="none"};b.prototype.getCurrentTab=function(){return this.current_tab};b.prototype.appendTo=function(a,c){c?$(a).prepend(this.root):$(a).append(this.root)};b.prototype.getTab=function(a){return this.tabs[a]};b.prototype.getTabContent=function(a){return this.contents[a]};b.prototype.addTab=function(a,c){c=c||{};var b=this,d=document.createElement("LI");d.className="wtab wtab-"+a.replace(/ /gi,"_");d.data=a;d.innerHTML=a;this.list.appendChild(d);
var e=document.createElement("div");c.id&&(e.id=c.id);e.className="wtabcontent wtabcontent-"+a.replace(/ /gi,"_")+" "+(c.className||"");e.data=a;e.style.display="none";c.height&&(e.style.overflow="auto","full"==c.height?(e.style.height="calc( 100% - "+LiteGUI.Tabs.tabs_height+" )",e.style.height="-moz-calc( 100% - "+LiteGUI.Tabs.tabs_height+" )",e.style.height="-webkit-calc( 100% - "+LiteGUI.Tabs.tabs_height+" )"):e.style.height=c.height);c.content&&("string"==typeof c.content?e.innerHTML=c.content:
e.appendChild(c.content));this.root.appendChild(e);this.contents[a]=e;d.addEventListener("click",function(d){if(!this.classList.contains("selected")){d=this.data;var e=null,l;for(l in b.contents)l==d?($(b.contents[l]).show(),e=b.contents[l]):$(b.contents[l]).hide();$(b.list).find("li.wtab").removeClass("selected");this.classList.add("selected");b.current_tab&&b.current_tab[0]!=d&&b.current_tab[2]&&b.current_tab[2].callback_leave&&b.current_tab[2].callback_leave(b.current_tab[0],b.current_tab[1],b.current_tab[2]);
b.current_tab=[d,e,c];c.callback&&c.callback(d,e);$(b).trigger("wchange",[d,e]);if(b.onchange)b.onchange(a,d,e);b.selected=a}});this.list.appendChild(d);!0!=c.selected&&null!=this.selected||this.selectTab(a);this.tabs[a]={tab:d,content:e,add:function(a){this.content.appendChild(a.root||a)}};return this.tabs[a]};b.prototype.selectTab=function(a){for(var c=this.list.querySelectorAll("li.wtab"),b=0;b<c.length;b++)if(a==c[b].data){$(c[b]).click();break}};b.prototype.setTabVisibility=function(a,c){var b=
this.tabs[a];b&&(b.tab.style.display=c?"none":"inline-block",b.content.style.display=c?"none":"inline-block")};b.prototype.removeTab=function(a){var c=this.tabs[a];c&&(c.tab.parentNode.removeChild(c.tab),c.content.parentNode.removeChild(c.content),delete this.tabs[a],delete this.contents[a])};b.prototype.hideTab=function(a){this.setTabVisibility(a,!1)};b.prototype.showTab=function(a){this.setTabVisibility(a,!0)};LiteGUI.Tabs=b})();
(function(){LiteGUI.Dragger=function(b,a){function c(c){var b=[c.screenX-m.data[0],m.data[1]-c.screenY];m.data=[c.screenX,c.screenY];d(b[a.horizontal?0:1],c);c.stopPropagation();c.preventDefault();return!1}function g(a){$(e).trigger("stop_dragging");$(document).unbind("mousemove",c);$(document).unbind("mouseup",g);$(m).trigger("blur");a.stopPropagation();a.preventDefault();return!1}function d(c,b){var d=a.step?a.step:1;b&&b.shiftKey?d*=10:b&&b.ctrlKey&&(d*=0.1);d=parseFloat(l.value)+c*d;null!=a.max&&
d>a.max&&(d=a.max);null!=a.min&&d<a.min&&(d=a.min);l.value=a.precision?d.toFixed(a.precision):(1E3*d<<0)/1E3;a.units&&(l.value+=a.units);$(l).change()}a=a||{};var e=document.createElement("div");e.className="dragger "+(a.extraclass?a.extraclass:"");this.root=e;var f=document.createElement("span");f.className="inputfield "+(a.extraclass?a.extraclass:"");a.disabled&&(f.className+=" disabled");e.appendChild(f);var h=a.dragger_class||"full",l=document.createElement("input");l.className="text number "+
(h?h:"");l.value=b+(a.units?a.units:"");l.tabIndex=a.tab_index;this.input=l;e.input=l;a.disabled&&(l.disabled=!0);a.tab_index&&(l.tabIndex=a.tab_index);f.appendChild(l);this.setValue=function(a){$(l).val(a).trigger("change")};$(l).bind("keydown",function(a){if(38==a.keyCode)d(1,a);else if(40==a.keyCode)d(-1,a);else return;a.stopPropagation();a.preventDefault();return!0});var m=document.createElement("div");m.className="drag_widget";a.disabled&&(m.className+=" disabled");f.appendChild(m);e.dragger=
m;$(m).bind("mousedown",function(b){$(document).unbind("mousemove",c);$(document).unbind("mouseup",g);a.disabled||($(document).bind("mousemove",c),$(document).bind("mouseup",g),m.data=[b.screenX,b.screenY],$(e).trigger("start_dragging"));b.stopPropagation();b.preventDefault()})}})();
(function(){function b(a,c,b){var d=document.createElement("div");this.root=d;a&&(d.id=a);d.className="litetree";this.tree=c;this.options=b=b||{allow_rename:!0,drag:!0};a=this.createTreeItem(c,b);a.className+=" root_item";this.root.appendChild(a);this.root_item=a}b.prototype.updateTree=function(a){this.root_item&&$(this.root_item).remove();a&&(a=this.createTreeItem(a,this.options),a.className+=" root_item",this.root.appendChild(a),this.root_item=a)};b.prototype.createTreeItem=function(a,c){var b=
document.createElement("li");b.className="ltreeitem";a.id&&(b.id=a.id);b.data=a;a.DOM=b;c=c||this.options;var d=document.createElement("div");d.className="ltreeitemtitle";a.className&&(d.className+=" "+a.className);d.innerHTML="<span class='precontent'></span><span class='incontent'>"+(a.content||a.id||"")+"</span><span class='postcontent'></span>";b.appendChild(d);b.title_element=d;var e=$(b).find(".ltreeitemtitle .incontent");e.click(function(a){a=this.parentNode;var c=a.parentNode;a._editing||
($(l.root).removeClass("selected"),$(l.root).find(".ltreeitemtitle.selected").removeClass("selected"),$(a).addClass("selected"),$(l.root).trigger("item_selected",[c.data,c]),c.callback&&c.callback.call(l,c))});e.dblclick(function(a){var c=this.parentNode;$(l.root).trigger("item_dblclicked",[c.data,c]);if(!this._editing&&l.options.allow_rename){this._editing=!0;this._old_name=this.innerHTML;var b=this;this.innerHTML="<input type='text' value='"+this.innerHTML+"' />";var d=$(this).find("input")[0];
$(d).blur(function(a){var d=a.target.value;setTimeout(function(){b.innerHTML=d},1);delete b._editing;$(l.root).trigger("item_renamed",[b._old_name,d,c]);delete b._old_name});$(d).bind("keydown",function(a){13==a.keyCode&&$(this).blur()});$(d).focus();a.preventDefault()}});e[0].addEventListener("contextmenu",function(a){if(l.onContextMenu&&2==a.button&&l.onContextMenu)l.onContextMenu(a);a.preventDefault();return!1});e=document.createElement("ul");e.className="ltreeitemchildren";b.children_element=
e;b.list=e;if(a.children)for(var f in a.children){var h=this.createTreeItem(a.children[f],c);e.appendChild(h)}b.appendChild(e);this.updateListBox(b);var l=this;d.draggable=!0;d.addEventListener("dragstart",function(a){a.dataTransfer.setData("node-id",this.parentNode.id)});d.addEventListener("dragenter",function(a){$(d).addClass("dragover");a.preventDefault()});d.addEventListener("dragleave",function(a){$(d).removeClass("dragover");a.preventDefault()});d.addEventListener("dragover",function(a){a.preventDefault()});
d.addEventListener("drop",function(a){$(d).removeClass("dragover");a.preventDefault();var c=a.dataTransfer.getData("node-id");if(""!=c)try{l.moveItem(c,this.parentNode.id)&&$(l.root).trigger("item_moved",[l.getItem(c),l.getItem(this.parentNode.id)])}catch(b){console.error("Error: "+b)}else $(l.root).trigger("drop_on_item",[this,a])});return b};b.prototype.filterByName=function(a){for(var c=this.root.querySelectorAll(".ltreeitemtitle .incontent"),b=0;b<c.length;b++){var d=c[b];if(d){var e=d.innerHTML,
d=d.parentNode;a&&-1==e.indexOf(a)?(d.style.display="none",d.parentNode.style.paddingLeft=0):(d.style.display="block",d.parentNode.style.paddingLeft=null)}}};b.onClickBox=function(a){a=this.children_element;a.style.display="none"==a.style.display?"block":"none"};b.prototype.getItem=function(a){a=this.root.querySelector("#"+a);if(!a)return null;if(!$(a).hasClass("ltreeitem"))throw"this node is not a tree item";return a};b.prototype.expandItem=function(a){(a=this.getItem(a))&&a.listbox&&listbox.setValue(!0)};
b.prototype.contractItem=function(a){(a=this.getItem(a))&&a.listbox&&listbox.setValue(!1)};b.prototype.setSelectedItem=function(a){if(a){a=this.getItem(a);if(!a)return null;if($(a).hasClass("selected"))return a;$(this.root).removeClass("selected");$(this.root).find(".ltreeitemtitle.selected").removeClass("selected");$(a.title_element).addClass("selected");return a}$(this.root).removeClass("selected");$(this.root).find(".ltreeitemtitle.selected").removeClass("selected")};b.prototype.getSelectedItem=
function(){return this.root.querySelector(".ltreeitemtitle.selected")};b.prototype.insertItem=function(a,c,b,d){var e=this.root_item;if(c&&(e="string"==typeof c?this.getItem(c):c,!e))return null;if(!$(e).hasClass("ltreeitem"))throw"this node is not a tree item";a=this.createTreeItem(a,d);void 0==b?e.list.appendChild(a):e.list.insertBefore(a,e.list.childNodes[b]);this.updateListBox(e);return a};b.prototype.updateListBox=function(a){if(!a.listbox){var c=a.title_element.querySelector(".precontent"),
g=LiteGUI.createLitebox(!0,b.onClickBox.bind(a));g.setEmpty(!0);c.appendChild(g);a.listbox=g}(c=this.getChildren(a))&&(c.length?a.listbox.setEmpty(!1):a.listbox.setEmpty(!0))};b.prototype.getChildren=function(a){"string"==typeof a&&this.getItem(a);if(!a||!a.list)return null;a=a.list.childNodes;var c=[],b;for(b in a){var d=a[b];"li"==d.localName&&$(d).hasClass("ltreeitem")&&c.push(d)}return c};b.prototype.getParent=function(a){"string"==typeof a&&this.getItem(a);if(!a)return null;for(a=a.parentNode;a;){if($(a).hasClass("ltreeitem"))return a;
a=a.parentNode}return null};b.prototype.moveItem=function(a,c){var b=this.getItem(c),d=this.getItem(a),e=this.getParent(d);if(!b||!d)return!1;if(b!=e)return b.list.appendChild(d),this.updateListBox(b),e&&this.updateListBox(e),!0};b.prototype.removeItem=function(a){var c=a;"string"==typeof a&&(c=this.getItem(a));if(!c)return null;(a=this.getParent(c))&&a.list&&(a.list.removeChild(c),a&&this.updateListBox(a))};b.prototype.updateItem=function(a,c){var b=this.getItem(a);b&&(b.data=c,c.id&&(b.id=c.id),
c.content&&(b.title_element.querySelector(".incontent").innerHTML=c.content))};b.prototype.clear=function(a){$(a?this.root_item:this.root).find(".ltreeitem").remove()};LiteGUI.Tree=b})();
(function(){function b(a,b){b=b||{};this._ctor(a,b)}function a(a,b){this._ctor(a,b)}b.title_height="20px";b.prototype._ctor=function(a,b){this.content=b.content||"";var d=this.root=document.createElement("div");a&&(d.id=a);d.className="litepanel "+(b.className||"");d.data=this;var e="";b.title&&(e+="<div class='panel-header'>"+b.title+"</div>");e+="<div class='content'>"+this.content+"</div>";d.innerHTML=e+"<div class='panel-footer'></div>";b.title&&(this.header=this.root.querySelector(".panel-header"));
this.content=this.root.querySelector(".content");this.footer=this.root.querySelector(".panel-footer");!0==b.scroll&&(this.content.style.overflow="auto")};b.prototype.add=function(a){this.content.appendChild(a.root)};a.MINIMIZED_WIDTH=200;a.title_height="20px";a.prototype._ctor=function(a,b){this.width=b.width;this.height=b.height;this.minWidth=b.minWidth||150;this.minHeight=b.minHeight||100;this.content=b.content||"";var d=document.createElement("div");a&&(d.id=a);d.className="litedialog "+(b.className||
"");d.data=this;var e="";b.title&&(e+="<div class='panel-header'>"+b.title+"</div><div class='buttons'>",b.minimize&&(e+="<button class='mini-button minimize-button'></button><button class='mini-button maximize-button' style='display:none'></button>"),b.hide&&(e+="<button class='mini-button hide-button'></button>"),b.close&&(e+="<button class='mini-button close-button'></button>"),e+="</div>");e+="<div class='content'>"+this.content+"</div>";e+="<div class='panel-footer'></div>";d.innerHTML=e;this.root=
d;this.content=$(d).find(".content")[0];this.footer=$(d).find(".panel-footer")[0];if(b.buttons)for(var f in b.buttons)this.addButton(b.buttons[f].name,b.buttons[f]);!0==b.scroll&&(this.content.style.overflow="auto");$(d).find(".close-button").bind("click",this.close.bind(this));$(d).find(".minimize-button").bind("click",this.minimize.bind(this));$(d).find(".maximize-button").bind("click",this.maximize.bind(this));$(d).find(".hide-button").bind("click",this.hide.bind(this));this.makeDialog(b)};a.prototype.add=
function(a){this.content.appendChild(a.root)};a.prototype.makeDialog=function(a){a=a||{};var b=this.root;b.style.position="absolute";b.style.minWidth=this.minWidth+"px";b.style.minHeight=this.minHeight+"px";this.width&&(b.style.width=this.width+"px");this.height&&("number"==typeof this.height?b.style.height=this.height+"px":-1!=this.height.indexOf("%")&&(b.style.height=this.height),this.content.style.height="calc( "+this.height+" - 24px )");b.style.boxShadow="0 0 3px black";a.draggable&&(this.draggable=
!0,LiteGUI.draggable(b,b.querySelector(".panel-header")));a.resizable&&this.setResizable();b=null;a.parent&&(b="string"==typeof a.parent?document.querySelector(a.parent):a.parent);b||(b=LiteGUI.root);b.appendChild(this.root);this.center()};a.prototype.setResizable=function(){function a(d){if("mousedown"==d.type)document.body.addEventListener("mousemove",a),document.body.addEventListener("mouseup",a),e[0]=d.pageX,e[1]=d.pageY;else if("mousemove"==d.type){var l=$(b).height()-(e[1]-d.pageY);$(b).height(l+
"px");e[0]=d.pageX;e[1]=d.pageY;f.content.style.height="calc( 100% - 24px )"}else"mouseup"==d.type&&(document.body.removeEventListener("mousemove",a),document.body.removeEventListener("mouseup",a));d.preventDefault();return!1}if(!this.resizable){var b=this.root;this.resizable=!0;var d=this.footer;d.style.minHeight="4px";$(d).addClass("resizable");d.addEventListener("mousedown",a);var e=[0,0],f=this}};a.prototype.dockTo=function(a,b){if(a){var d=this.root;b=b||"full";a=a.content||a;d.style.top=0;d.style.left=
0;d.style.boxShadow="0 0 0";if("full"==b)d.style.position="relative",d.style.width="100%",d.style.height="100%",this.content.style.width="100%",this.content.style.height="calc(100% - "+LiteGUI.Panel.title_height+")",this.content.style.height="-moz-calc(100% - "+LiteGUI.Panel.title_height+")",this.content.style.height="-webkit-calc(100% - "+LiteGUI.Panel.title_height+")",this.content.style.overflow="auto";else if("left"==b||"right"==b)d.style.position="absolute",d.style.top=0,d.style[b]=0,d.style.width=
this.width+"px",d.style.height="100%",this.content.style.height="-moz-calc(100% - "+LiteGUI.Panel.title_height+")",this.content.style.height="-webkit-calc(100% - "+LiteGUI.Panel.title_height+")",this.content.style.height="calc(100% - "+LiteGUI.Panel.title_height+")",this.content.style.overflow="auto","right"==b&&(d.style.left="auto",d.style.right=0);else if("bottom"==b||"top"==b)d.style.width="100%",d.style.height=this.height+"px","bottom"==b&&(d.style.bottom=0,d.style.top="auto");this.draggable&&
$(d).draggable({disabled:!0});a.content?a.content.appendChild(d):"string"==typeof a?$(a).append(d):a.appendChild(d)}};a.prototype.addButton=function(a,b){var d=this,e=document.createElement("button");e.innerHTML=a;b.className&&(e.className=b.className);$(this.root).find(".panel-footer").append(e);$(e).bind("click",function(a){b.callback&&b.callback(this);b.close&&d.close()});return e};a.prototype.close=function(){$(this.root).remove();$(this).trigger("closed")};a.minimized=[];a.prototype.minimize=
function(){this.minimized||(this.minimized=!0,this.old_pos=$(this.root).position(),$(this.root).find(".content").hide(),$(this.root).draggable({disabled:!0}),$(this.root).find(".minimize-button").hide(),$(this.root).find(".maximize-button").show(),$(this.root).css({width:LiteGUI.Dialog.MINIMIZED_WIDTH}),$(this).bind("closed",function(){LiteGUI.Dialog.minimized.splice(LiteGUI.Dialog.minimized.indexOf(this),1);LiteGUI.Dialog.arrangeMinimized()}),LiteGUI.Dialog.minimized.push(this),LiteGUI.Dialog.arrangeMinimized(),
$(this).trigger("minimizing"))};a.arrangeMinimized=function(){for(var a in LiteGUI.Dialog.minimized){var b=$(LiteGUI.Dialog.minimized[a].root.parentNode).height()-20;$(panel.root).animate({left:LiteGUI.Dialog.MINIMIZED_WIDTH*a,top:b+"px"},100)}};a.prototype.maximize=function(){this.minimized&&(this.minimized=!1,$(this.root).find(".content").show(),$(this.root).draggable({disabled:!1}),$(this.root).animate({left:this.old_pos.left+"px",top:this.old_pos.top+"px",width:this.width},100),$(this.root).find(".minimize-button").show(),
$(this.root).find(".maximize-button").hide(),LiteGUI.Dialog.minimized.splice(LiteGUI.Dialog.minimized.indexOf(this),1),LiteGUI.Dialog.arrangeMinimized(),$(this).trigger("maximizing"))};a.prototype.makeModal=function(){LiteGUI.showModalBackground(!0);LiteGUI.modalbg_div.appendChild(this.root);this.show();this.center();$(this).bind("closed",function(a){LiteGUI.showModalBackground(!1)})};a.prototype.bringToFront=function(){var a=$(this.root).parent();a.detach(this.root);a.attach(this.root)};a.prototype.show=
function(a,b){this.root.parentNode||LiteGUI.add(this);$(this.root).show();$(this).trigger("shown")};a.prototype.hide=function(a,b){$(this.root).hide();$(this).trigger("hidden")};a.prototype.setPosition=function(a,b){this.root.position="absolute";this.root.style.left=a+"px";this.root.style.top=b+"px"};a.prototype.setSize=function(a,b){this.root.style.width=a+"px";this.root.style.height=b+"px"};a.prototype.center=function(){this.root.position="absolute";this.root.style.left=Math.floor(0.5*($(this.root.parentNode).width()-
$(this.root).width()))+"px";this.root.style.top=Math.floor(0.5*($(this.root.parentNode).height()-$(this.root).height()))+"px"};a.prototype.adjustSize=function(){this.content.style.height="auto";var a=$(this.content).width(),b=$(this.content).height()+20;this.setSize(a,b)};LiteGUI.Panel=b;LiteGUI.Dialog=a})();jQuery.fn.wchange=function(b){$(this[0]).on("wchange",b)};jQuery.fn.wclick=function(b){$(this[0]).on("wclick",b)};
function Inspector(b,a){a=a||{};this.root=document.createElement("DIV");this.root.className="inspector "+(a.full?"full":"");a.one_line&&(this.root.className+=" one-line");b&&(this.root.id=b);this.values={};this.sections=[];this.widgets={};this.addSection();this.tab_index=Math.floor(1E4*Math.random());a.name_width&&(this.name_width=a.name_width);a.parent&&this.appendTo(a.parent);this.widgets_per_row=a.widgets_per_row||1}Inspector.prototype.appendTo=function(b,a){a?$(b).prepend(this.root):$(b).append(this.root)};
Inspector.prototype.clear=function(){purgeElement(this.root,!0);$(this.root).empty();this.sections=[];this.values={};this.widgets={};this.addSection()};Inspector.prototype.append=function(b,a){var c=this.root;this.current_group_content?c=this.current_group_content:this.current_section_content&&(c=this.current_section_content);a&&a.replace?a.replace.parentNode.replaceChild(b,a.replace):c.appendChild(b)};
Inspector.prototype.setup=function(b){for(var a in b){var c=b[a];this.add(c.type,c.name,c.value,c.options)}};
Inspector.prototype.inspectInstance=function(b,a,c){function g(a,b){b=b||{};for(var c in a)b[c]=a[c];return b}if(b){a=!a&&b.getAttributes?b.getAttributes():this.collectAttributes(b);var d=b.constructor;!c&&d.attributes&&(c=d.attributes);var e={},f;for(f in a)if(c&&c[f])e[f]=g(c[f]);else{var h=a[f];if(d["@"+f])e[f]=g(d["@"+f]);else if(b["@"+f])e[f]=b["@"+f];else if("number"==typeof h)e[f]={type:"number",step:0.1};else if("string"==typeof h)e[f]={type:"string"};else if("boolean"==typeof h)e[f]={type:"boolean"};
else if(h&&h.length)switch(h.length){case 2:e[f]={type:"vec2",step:0.1};break;case 3:e[f]={type:"vec3",step:0.1};break;case 4:e[f]={type:"vec4",step:0.1}}}return this.showAttributes(b,e)}};Inspector.prototype.collectAttributes=function(b){var a={},c;for(c in b)if("_"!=c[0]&&"@"!=c[0]&&"jQuery"!=c.substr(0,6)){var g=b[c];g&&g.constructor==Function||(a[c]=g)}return a};
Inspector.prototype.showAttributes=function(b,a){for(var c in a){var g=a[c];g.callback||(g.callback=Inspector.assignValue.bind({instance:b,name:c,options:g}));g.instance=b;this.add(g.type||g.widget||"string",c,b[c],g)}if(b.constructor.widgets)for(c in b.constructor.widgets)g=b.constructor.widgets[c],this.add(g.widget,g.name,g.value,g);if(b.onShowAttributes)b.onShowAttributes(this);if(b.constructor.onShowAttributes)b.constructor.onShowAttributes(b,this)};
Inspector.assignValue=function(b){var a=this.instance,c=a[this.name];if(null==c||null==b)a[this.name]=b;else if("number"==typeof c)a[this.name]=parseFloat(b);else if("string"==typeof c)a[this.name]=b;else if(b&&b.length&&c&&c.length)for(a=0;a<c.length;++a)c[a]=b[a];else a[this.name]=b};
Inspector.prototype.createWidget=function(b,a,c){c=c||{};a=a||"";var g=document.createElement("DIV");g.className="widget "+(c.className||"");g.inspector=this;g.options=c;g.name=b;c.width&&(g.style.width="string"==typeof c.width?c.width:c.width+"px",g.style.minWidth=g.style.width);b&&(this.widgets[b]=g);1!=this.widgets_per_row&&(c.width||(g.style.width=(100/this.widgets_per_row).toFixed(2)+"%"),g.style.display="inline-block");var d="",e="";null!=b&&(this.name_width||c.name_width)&&(e=this.name_width||
c.name_width,"number"==typeof e&&(e=e.toFixed()+"px"),d="style='width: calc("+e+" - 0px); width: -webkit-calc("+e+" - 0px); width: -moz-calc("+e+" - 0px); '",e="style='width: calc( 100% - "+e+"); width: -webkit-calc(100% - "+e+"); width: -moz-calc( 100% - "+e+"); '");c="";var f="wcontent ";null==b?f+=" full":c=""==b?"<span class='wname' title='"+b+"' "+d+"></span>":"<span class='wname' title='"+b+"' "+d+">"+b+"<span class='filling'>....................</span> </span>";"string"==typeof a?g.innerHTML=
c+"<span class='info_content "+f+"' "+e+">"+a+"</span>":(g.innerHTML=c+"<span class='info_content "+f+"' "+e+"></span>",$(g).find("span.info_content").append(a));return g};Inspector.onWidgetChange=function(b,a,c,g){this.values[a]=c;$(this.current_section).trigger("wchange",c);g.callback&&g.callback.call(b,c);$(b).trigger("wchange",c);if(this.onchange)this.onchange(a,c,b)};
Inspector.widget_constructors={title:"addTitle",info:"addInfo",number:"addNumber",slider:"addSlider",string:"addString",text:"addString",textarea:"addTextarea",color:"addColor","boolean":"addCheckbox",checkbox:"addCheckbox",vec2:"addVector2",vector2:"addVector2",vec3:"addVector3",vector3:"addVector3","enum":"addCombo",combo:"addCombo",button:"addButton",buttons:"addButtons",file:"addFile",line:"addLine",list:"addList",separator:"addSeparator"};
Inspector.registerWidget=function(b,a){var c="add"+b.charAt(0).toUpperCase()+b.slice(1);Inspector.prototype[c]=a;Inspector.widget_constructors[b]=c};
Inspector.prototype.add=function(b,a,c,g){"object"==typeof b&&1==arguments.length&&(g=b,b=g.type,a=g.name,c=g.value);var d=Inspector.widget_constructors[b];if(d){if("string"==typeof d&&(d=Inspector.prototype[d]),d&&"function"==typeof d)return"function"==typeof g&&(g={callback:g}),d.call(this,a,c,g)}else console.warn("LiteGUI.Inspector do not have a widget called",b)};Inspector.prototype.getValue=function(b){return this.values[b]};Inspector.prototype.set=function(b,a){};
Inspector.prototype.addSection=function(b,a){a=this.processOptions(a);this.current_group&&this.endGroup();var c=document.createElement("DIV");c.className="wsection";b||(c.className+=" notitle");a.className&&(c.className+=" "+a.className);var g="";b&&(g+="<div class='wsectiontitle'>"+(a.no_minimize?"":"<span class='switch-section-button'></span>")+b+"</div>");c.innerHTML=g+"<div class='wsectioncontent'></div>";this.root.appendChild(c);b&&$(c).find(".wsectiontitle").click(function(a){"button"!=a.target.localName&&
($(c).toggleClass("minimized"),$(c).find(".wsectioncontent").toggle())});this.current_section=c;this.content=this.current_section_content=$(c).find(".wsectioncontent")[0];a.widgets_per_row&&(this.widgets_per_row=a.widgets_per_row);return c};
Inspector.prototype.beginGroup=function(b,a){a=this.processOptions(a);this.current_group&&this.endGroup();var c=document.createElement("DIV");c.className="wgroup";c.innerHTML="<div class='wgroupheader "+(a.title?"wtitle":"")+"'><span class='wgrouptoggle'>-</span>"+(b||"")+"</div>";var g=document.createElement("DIV");g.className="wgroupcontent";a.collapsed&&(g.style.display="none");c.appendChild(g);var d=a.collapsed||!1;$(c).find(".wgroupheader").click(function(){$(c).find(".wgroupcontent").toggle();
d=!d;$(c).find(".wgrouptoggle").html(d?"+":"-")});this.append(c,a);this.current_group=c;this.content=this.current_group_content=g;return c};Inspector.prototype.endGroup=function(b){this.current_group_content=this.current_group=null;this.content=this.current_section_content};
Inspector.prototype.addTitle=function(b,a){a=this.processOptions(a);var c=document.createElement("DIV"),g="<span class='wtitle'><span class='text'>"+b+"</span>";a.help&&(g+="<span class='help'><div class='help-content'>"+a.help+"</div></span>");c.innerHTML=g+"</span>";c.setValue=function(a){$(this).find(".text").html(a)};this.append(c,a);return c};Inspector.prototype.addSeparator=function(){var b=document.createElement("DIV");b.className="separator";this.append(b);return b};
Inspector.prototype.addString=function(b,a,c){c=this.processOptions(c);a=a||"";var g=this;this.values[b]=a;var d="text";c.password&&(d="password");var e=this.createWidget(b,"<span class='inputfield full "+(c.disabled?"disabled":"")+"'><input type='"+d+"' tabIndex='"+this.tab_index+"' class='text string' value='"+a+"' "+(c.disabled?"disabled":"")+"/></span>",c);$(e).find(".wcontent input").change(function(a){Inspector.onWidgetChange.call(g,e,b,a.target.value,c)});this.tab_index+=1;e.setValue=function(a){$(this).find("input").val(a).change()};
e.getValue=function(){return $(this).find("input").val()};e.wchange=function(a){$(this).wchange(a)};this.append(e,c);return e};
Inspector.prototype.addStringButton=function(b,a,c){c=this.processOptions(c);a=a||"";var g=this;this.values[b]=a;var d=this.createWidget(b,"<span class='inputfield button'><input type='text' tabIndex='"+this.tab_index+"' class='text string' value='"+a+"' "+(c.disabled?"disabled":"")+"/></span><button class='micro'>"+(c.button||"...")+"</button>",c);$(d).find(".wcontent input").change(function(a){Inspector.onWidgetChange.call(g,d,b,a.target.value,c)});$(d).find(".wcontent button").click(function(a){c.callback_button&&
c.callback_button.call(d,$(d).find(".wcontent input").val())});this.tab_index+=1;this.append(d,c);d.wchange=function(a){$(this).wchange(a)};d.wclick=function(a){$(this).wclick(a)};return d};
Inspector.prototype.addNumber=function(b,a,c){c=this.processOptions(c);c.step||(c.step=0.1);a=a||0;var g=this;this.values[b]=a;var d=this.createWidget(b,"",c);this.append(d,c);c.extraclass="full";c.tab_index=this.tab_index;c.dragger_class="full";this.tab_index++;a=new LiteGUI.Dragger(a,c);$(d).find(".wcontent").append(a.root);$(a.root).bind("start_dragging",function(a){this.callback_before&&this.callback_before.call(d)}.bind(c));$(d).find("input").change(function(a){g.values[b]=a.target.value;if(c.callback){var f=
c.callback.call(d,parseFloat(a.target.value));"number"==typeof f&&$(this).val(f)}$(d).trigger("wchange",a.target.value);if(g.onchange)g.onchange(b,a.target.value,d)});d.setValue=function(a){$(this).find("input").val(a).change()};return d};
Inspector.prototype.addVector2=function(b,a,c){function g(a){this.callback_before&&this.callback_before(a)}c=this.processOptions(c);c.step||(c.step=0.1);a=a||[0,0];var d=this;this.values[b]=a;var e=this.createWidget(b,"",c);c.step=c.step||0.1;c.dragger_class="medium";c.tab_index=this.tab_index;this.tab_index++;var f=new LiteGUI.Dragger(a[0],c);f.root.style.marginLeft=0;$(e).find(".wcontent").append(f.root);c.tab_index=this.tab_index;this.tab_index++;var h=new LiteGUI.Dragger(a[1],c);$(e).find(".wcontent").append(h.root);
$(f.root).bind("start_dragging",g.bind(c));$(h.root).bind("start_dragging",g.bind(c));$(e).find("input").change(function(a){a=[];for(var f=$(e).find("input"),g=0;g<f.length;g++)a.push(parseFloat(f[g].value));d.values[b]=a;if(c.callback){var h=c.callback.call(e,a);if("object"==typeof h&&2<=h.length){for(g=0;g<f.length;g++)$(f[g]).val(h[g]);a=h}}$(e).trigger("wchange",[a]);if(d.onchange)d.onchange(b,a,e)});this.append(e,c);e.setValue=function(a){f.setValue(a[0]);h.setValue(a[1])};return e};
Inspector.prototype.addVector3=function(b,a,c){function g(a){this.callback_before&&this.callback_before()}c=this.processOptions(c);c.step||(c.step=0.1);a=a||[0,0,0];var d=this;this.values[b]=a;var e=this.createWidget(b,"",c);c.step=c.step||0.1;c.dragger_class="mini";c.tab_index=this.tab_index;this.tab_index++;var f=new LiteGUI.Dragger(a[0],c);f.root.style.marginLeft=0;$(e).find(".wcontent").append(f.root);c.tab_index=this.tab_index;this.tab_index++;var h=new LiteGUI.Dragger(a[1],c);$(e).find(".wcontent").append(h.root);
c.tab_index=this.tab_index;this.tab_index++;var l=new LiteGUI.Dragger(a[2],c);$(e).find(".wcontent").append(l.root);$(f.root).bind("start_dragging",g.bind(c));$(h.root).bind("start_dragging",g.bind(c));$(l.root).bind("start_dragging",g.bind(c));$(e).find("input").change(function(a){a=[];for(var f=$(e).find("input"),g=0;g<f.length;g++)a.push(parseFloat(f[g].value));d.values[b]=a;if(c.callback){var l=c.callback.call(e,a);if("object"==typeof l&&3<=l.length){for(g=0;g<f.length;g++)$(f[g]).val(l[g]);a=
l}}$(e).trigger("wchange",[a]);if(d.onchange)d.onchange(b,a,e)});this.append(e,c);e.setValue=function(a){f.setValue(a[0]);h.setValue(a[1]);l.setValue(a[2])};return e};
Inspector.prototype.addTextarea=function(b,a,c){c=this.processOptions(c);a=a||"";var g=this;this.values[b]=a;var d=this.createWidget(b,"<span class='inputfield textarea "+(c.disabled?"disabled":"")+"'><textarea tabIndex='"+this.tab_index+"' "+(c.disabled?"disabled":"")+">"+a+"</textarea></span>",c);this.tab_index++;$(d).find(".wcontent textarea").on(c.inmediate?"keyup":"change",function(a){Inspector.onWidgetChange.call(g,d,b,a.target.value,c)});c.height&&$(d).find("textarea").css({height:c.height});
this.append(d,c);d.setValue=function(a){$(this).find("textarea").val(a).change()};return d};
Inspector.prototype.addInfo=function(b,a,c){c=this.processOptions(c);a=a||"";var g=null;null!=b?g=this.createWidget(b,a,c):(g=document.createElement("div"),c.className&&(g.className=c.className),g.innerHTML="<span class='winfo'>"+a+"</span>");g.setValue=function(a){$(this).find(".winfo").html(a)};c.height&&(b=$(g).find("span.info_content")[0],b.style.height="string"==typeof c.height?c.height:c.height+"px",b.style.overflow="auto");this.append(g,c);return g};
Inspector.prototype.addSlider=function(b,a,c){c=this.processOptions(c);void 0===c.min&&(c.min=0);void 0===c.max&&(c.max=1);void 0===c.step&&(c.step=0.01);var g=this;this.values[b]=a;var d=this.createWidget(b,"<span class='inputfield'>\t\t\t\t<input tabIndex='"+this.tab_index+"' type='text' class='slider-text fixed nano' value='"+a+"' /><span class='slider-container'></span></span>",c),e=d.querySelector(".slider-container"),f=new LiteGUI.Slider(a,c);e.appendChild(f.root);var h=d.querySelector(".slider-text");
$(h).on("change",function(){var a=parseFloat($(this).val());f.setValue(a);Inspector.onWidgetChange.call(g,d,b,a,c)});$(f.root).on("change",function(a,e){h.value=e;Inspector.onWidgetChange.call(g,d,b,e,c)});this.append(d,c);d.setValue=function(a){f.setValue(a)};return d};
Inspector.prototype.addCheckbox=function(b,a,c){c=this.processOptions(c);a=a||"";var g=this;this.values[b]=a;var d=this.createWidget(b,"<span class='inputfield'><span tabIndex='"+this.tab_index+"' class='fixed flag checkbox "+(a?"on":"off")+"'>"+(a?"on":"off")+"</span></span>",c);this.tab_index++;$(d).find(".wcontent .checkbox").keypress(function(a){32==a.keyCode&&$(this).click()});$(d).click(function(){var a=!this.data;this.data=a;$(d).find("span.flag").html(a?"on":"off");a?$(d).find("span.checkbox").addClass("on"):
$(d).find("span.checkbox").removeClass("on");Inspector.onWidgetChange.call(g,d,b,a,c)})[0].data=a;d.setValue=function(a){g.values[b]!=a&&$(this).find(".checkbox").click()};this.append(d,c);return d};Inspector.prototype.addFlags=function(b,a){var c={},g;for(g in b)c[g]=b[g];if(a)for(g in a)"undefined"==typeof c[g]&&(c[g]=a[g]?!0:!1);for(g in c)this.addCheckbox(g,c[g],{callback:function(a){return function(c){b[a]=c}}(g)})};
Inspector.prototype.addCombo=function(b,a,c){c=this.processOptions(c);var g=this;this.values[b]=a;var d="<select tabIndex='"+this.tab_index+"' "+(c.disabled?"disabled":"")+" class='"+(c.disabled?"disabled":"")+"'>";this.tab_index++;var e=this.createWidget(b,"<span class='inputfield full inputcombo "+(c.disabled?"disabled":"")+"'></span>",c);e.options=c;var f=c.values||[];if(c.values&&(f="function"==typeof f?c.values():c.values))for(var h in f)d+="<option "+(f[h]==a?" selected":"")+">"+(f.length?f[h]:
h)+"</option>";d+="</select>";e.querySelector("span.inputcombo").innerHTML=d;$(e).find(".wcontent select").change(function(a){a=a.target.value;f&&f.constructor!=Array&&(a=f[a]);Inspector.onWidgetChange.call(g,e,b,a,c)});this.append(e,c);return e};
Inspector.prototype.addComboButtons=function(b,a,c){c=this.processOptions(c);a=a||"";var g=this;this.values[b]=a;var d="";if(c.values)for(var e in c.values)d+="<button class='wcombobutton "+(a==c.values[e]?"selected":"")+"' data-name='options.values[i]'>"+c.values[e]+"</button>";var f=this.createWidget(b,d,c);$(f).find(".wcontent button").click(function(a){a=a.target.innerHTML;g.values[b]=a;$(f).find(".selected").removeClass("selected");$(this).addClass("selected");Inspector.onWidgetChange.call(g,
f,b,a,c)});this.append(f,c);return f};
Inspector.prototype.addTags=function(b,a,c){function g(a){if(!f.tags[a]){f.tags[a]=!0;var e=document.createElement("div");e.data=a;e.className="wtag";e.innerHTML=a+"<span class='close'>X</span>";$(e).find(".close").click(function(a){a=$(this).parent()[0].data;delete f.tags[a];$(this).parent().remove();$(f).trigger("wremoved",a);Inspector.onWidgetChange.call(d,f,b,f.tags,c)});$(f).find(".wtagscontainer").append(e);d.values[b]=f.tags;c.callback&&c.callback.call(f,f.tags);$(f).trigger("wchange",f.tags);
$(f).trigger("wadded",a);if(d.onchange)d.onchange(b,f.tags,f)}}c=this.processOptions(c);a=a||[];var d=this;this.values[b]=a;a="<select>";if(c.values)for(var e in c.values)a+="<option>"+c.values[e]+"</option>";var f=this.createWidget(b,"<span class='inputfield full'>"+(a+"</select><div class='wtagscontainer inputfield'></div>")+"</span>",c);f.tags={};for(e in c.value)g(c.value[e]);$(f).find(".wcontent select").change(function(a){g(a.target.value)});this.append(f,c);return f};
Inspector.prototype.addList=function(b,a,c){function g(a){var b=$(h).find("li.selected");b&&b.length&&(40==a.keyCode?(a=b.next())&&a.length&&$(a[0]).click():38==a.keyCode&&(a=b.prev())&&a.length&&$(a[0]).click())}function d(d){c.multiselection?$(this).toggleClass("selected"):($(h).find("li").removeClass("selected"),$(this).addClass("selected"));d=a[this.dataset.pos];Inspector.onWidgetChange.call(e,h,b,d,c);$(h).trigger("wadded",d)}c=this.processOptions(c);var e=this,f="";c.height&&(f="style='height: "+
c.height+"px; overflow: auto;'");f="<ul class='lite-list' "+f+" tabIndex='"+this.tab_index+"'><ul>";this.tab_index++;var h=this.createWidget(b,"<span class='inputfield full "+(c.disabled?"disabled":"")+"'>"+f+"</span>",c);$(h).find("ul").focus(function(){$(document).on("keypress",g)});$(h).find("ul").blur(function(){$(document).off("keypress",g)});h.updateItems=function(b){var c="";if(a=b)for(var e in a){b=a[e];var f="";null==a[e].length&&(b=a[e].name?a[e].name:e,a[e].icon&&(f="<img src='"+a[e].icon+
"' class='icon' />"));c+="<li className='item-"+e+" "+("object"==typeof a[e]&&a[e].selected?"selected":"")+"' data-name='"+b+"' data-pos='"+e+"'>"+f+b+"</li>"}this.querySelector("ul").innerHTML=c;$(this).find(".wcontent li").click(d)};h.removeItem=function(a){for(var b=$(h).find(".wcontent li"),c=0;c<b.length;c++)b[c].dataset.name==a&&$(b[c]).remove()};h.updateItems(a);this.append(h,c);h.getSelected=function(){for(var a=[],b=this.querySelectorAll("ul li.selected"),c=0;c<b.length;++c)a.push(b[c].dataset.name);
return a};h.selectAll=function(){for(var a=this.querySelectorAll("ul li"),b=0;b<a.length;++b){var c=a[b];$(c).hasClass("selected")||$(c).click()}return r};c.height&&$(h).scroll(0);return h};
Inspector.prototype.addButton=function(b,a,c){c=this.processOptions(c);a=a||"";var g=this,d="";null===b&&(d="single");var e=this.createWidget(b,"<button class='"+d+"' tabIndex='"+this.tab_index+"'>"+a+"</button>",c);this.tab_index++;$(e).find("button").click(function(){Inspector.onWidgetChange.call(g,e,b,this.innerHTML,c);$(e).trigger("wclick",a)});this.append(e,c);e.wclick=function(a){c.disabled||$(this).wclick(a)};return e};
Inspector.prototype.addButtons=function(b,a,c){c=this.processOptions(c);a=a||"";var g=this,d="",e="calc("+(100/a.length).toFixed(3)+"% - "+Math.floor(16/a.length)+"px);";if(a&&"object"==typeof a)for(var f in a)d+="<button tabIndex='"+this.tab_index+"' style=' width:"+e+" width: -moz-"+e+" width: -webkit-calc("+(89/a.length).toFixed(3)+"%)'>"+a[f]+"</button>",this.tab_index++;var h=this.createWidget(b,d,c);$(h).find("button").click(function(){Inspector.onWidgetChange.call(g,h,b,this.innerHTML,c);$(h).trigger("wclick",
this.innerHTML)});this.append(h,c);return h};
Inspector.prototype.addColor=function(b,a,c){c=this.processOptions(c);a=a||[0,0,0];var g=this;this.values[b]=a;var d="<input tabIndex='"+this.tab_index+"' id='colorpicker-"+b+"' class='color' value='"+a+"' "+(c.disabled?"disabled":"")+"/>";this.tab_index++;c.show_rgb&&(d+="<span class='rgb-color'>"+Inspector.parseColor(a)+"</span>");var e=this.createWidget(b,d,c);this.append(e,c);var d=$(e).find("input.color")[0],f=new jscolor.color(d);f.pickerFaceColor="#333";f.pickerBorderColor="black";f.pickerInsetColor=
"#222";f.rgb_intensity=1;c.disabled&&(f.pickerOnfocus=!1);"string"!=typeof a&&a.length&&2<a.length&&(f.fromRGB(1*a[0],1*a[1],1*a[2]),f.rgb_intensity=1);$(d).change(function(a){$(e).find(".rgb-color").html(Inspector.parseColor(f.rgb))});f.onImmediateChange=function(){var a=[f.rgb[0]*f.rgb_intensity,f.rgb[1]*f.rgb_intensity,f.rgb[2]*f.rgb_intensity];g.values[b]=a;c.callback&&c.callback.call(e,a.concat(),"#"+f.toString(),f);$(e).trigger("wchange",[a.concat(),f.toString()]);if(g.onchange)g.onchange(b,
a.concat(),e)};c.step=c.step||0.01;c.dragger_class="nano";var h=new LiteGUI.Dragger(1,c);$(e).find(".wcontent").append(h.root);$(h.input).change(function(){var a=parseFloat($(this).val());f.rgb_intensity=a;if(f.onImmediateChange)f.onImmediateChange()});e.setValue=function(a){f.fromRGB(a[0],a[1],a[2]);$(h.input).change()};return e};
Inspector.prototype.addFile=function(b,a,c){c=this.processOptions(c);a=a||"";var g=this;this.values[b]=a;var d=this.createWidget(b,"<span class='inputfield full whidden'><span class='filename'>"+a+"</span><input type='file' size='100' class='file' value='"+a+"'/></span>",c);$(d).find(".wcontent input").change(function(a){c.callback&&c.callback.call(d,a.target.value);$(d).find(".filename").html(a.target.value);$(d).trigger("wchange",[a.target.files]);Inspector.onWidgetChange.call(g,d,b,a.target.value,
c)});this.append(d,c);return d};Inspector.prototype.addLine=function(b,a,c){c=this.processOptions(c);a=a||"";var g=this;this.values[b]=a;var d=this.createWidget(b,"<span class='line-editor'></span>",c);a=new LiteGUI.LineEditor(a,c);$(d).find("span.line-editor").append(a);$(a).change(function(a){c.callback&&c.callback.call(d,a.target.value);$(d).trigger("wchange",[a.target.value]);Inspector.onWidgetChange.call(g,d,b,a.target.value,c)});this.append(d,c);return d};
Inspector.prototype.addTree=function(b,a,c){function g(a,b){for(var c in b){var d=document.createElement("div");d.className="treenode";"object"==typeof b[c]?(d.innerHTML="<span class='itemname'>"+c+"</span><span class='itemcontent'></span>",g($(d).find(".itemcontent")[0],b[c])):d.innerHTML="<span class='itemname'>"+c+"</span><span class='itemvalue'>"+b[c]+"</span>";a.appendChild(d)}}c=this.processOptions(c);a=a||"";b=this.createWidget(b,"<div class='wtree'></div>",c);var d=$(b).find(".wtree")[0];
g(d,a);this.append(b,c);return b};Inspector.prototype.processOptions=function(b){"function"==typeof b&&(b={callback:b});return b||{}};Inspector.parseColor=function(b){return"<span style='color: #FAA'>"+b[0].toFixed(2)+"</span>,<span style='color: #AFA'>"+b[1].toFixed(2)+"</span>,<span style='color: #AAF'>"+b[2].toFixed(2)+"</span>"};LiteGUI.Inspector=Inspector;
